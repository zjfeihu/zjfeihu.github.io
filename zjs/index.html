<!doctype html>
<meta charset=utf-8>
<title>zjs</title>
<style>

html{overflow-y:scroll;}
body, ul{margin:0; padding:0}
body{color:#333; font:16px/1.5 microsoft yahei; background:#f7f7f9}
a{color:#428bca; text-decoration:none}
a:focus{outline:none}

.topbar{background:#2a3744; line-height:2.4em; padding-left:2em; overflow:hidden}
.topbar li{float:left; padding:0 1em; list-style:none}
.topbar a{color:#eee}

.pagebox{margin:0 auto; padding:8px; width:960px}

</style>


<script src="dist/z.js"></script>
<script src="dist/zwhl.js"></script>
<style>
#jscode{padding-top:38px!important}
.pagebox{margin-top:42px}
.pagebox .toolbar{top:8px}
</style>


<div class=pagebox>
<style>.page{margin-top:60px}

pre{font-family:monaco}
fieldset{margin-bottom:10px; padding:10px; color:#333; border:1px solid #06c}
legend{padding: 2px 6px; border:1px solid #06c; color:#06c; font-weight:800; background:#fff}
fieldset li{float:left; margin:2px; padding:4px 8px; width:100px; border:1px solid #ccc; list-style:none; background:#f5f5f5; color:#ccc; cursor:pointer}
fieldset .selected_s{border:1px solid #06c; background:#d6e9fc; color:#06c}
fieldset .selected_p{border:1px solid #036803; background:#c5da01; color:#036803}
.toolbar{position:fixed; top:50px; z-index:99;}
.toolbar a,
.button{display:inline-block; margin-right:2px; padding:4px 16px; border:1px solid #666; border-radius:6px; background:#699acb; color:#eee; font-weight:bold; text-decoration:none; cursor:pointer}
.hide{display:none!important}
#jscode{display:none;}</style>
<div class=toolbar>
    <a href=#top>选择API</a>
    <a jbtn=pickall>全选</a>
    <a jbtn=clean>取消</a>
    <a jbtn=packcode href=#jscode>生成代码</a>
    <a target=_blank href="../doc/">查看文档</a>
</div>
<a name=jscode></a>
<div id=jscode>jscode</div>
<script>
!function(){

$CODE = {"$browser":{"source":"$browser = function(){\r\n	\r\n	var version, ret = {}, ua = navigator.userAgent.toLowerCase();\r\n	\r\n    (version = ua.match(/msie ([\\d.]+)/)) ? ret.ie = version[1] :\r\n    (version = ua.match(/firefox\\/([\\d.]+)/)) ? ret.firefox = version[1] :\r\n    (version = ua.match(/(?:opera.|opr\\/)([\\d.]+)/)) ? ret.opera = version[1] :\r\n    (version = ua.match(/chrome\\/([\\d.]+)/)) ? ret.chrome = version[1] :\r\n    (version = ua.match(/version\\/([\\d.]+).*safari/)) ? ret.safari = version[1] : 0;\r\n	\r\n    return ret;\r\n	\r\n}();"},"$isie6":{"source":"$isie6 = /MSIE\\s*6.0/i.test(navigator.appVersion);"},"$cookie":{"source":"function $cookie(name, value, option){\r\n	\r\n    if(typeof name == 'object'){ //批量设置cookie\r\n		\r\n		for(var e in name){\r\n            $cookie(e, name[e], value);\r\n        }\r\n		\r\n    }else if(value !== undefined){\r\n		\r\n        option = option || {};\r\n		if(value === null){ //value为null,则设置cookie为过期\r\n			option.expires = -1;\r\n		}else if(typeof option == 'number'){\r\n			option = {expires: option};\r\n		}\r\n		\r\n		var newvalue = name + \"=\" + encodeURIComponent(value);\r\n		\r\n		if(option.expires){\r\n			var exp = new Date;\r\n			exp.setTime(+exp + option.expires * 60 * 1000); //以分钟为单位\r\n			newvalue += \"; expires=\" + exp.toUTCString();\r\n		}\r\n		\r\n		if(option.path){\r\n			newvalue += \"; path=\" + option.path;\r\n		}\r\n		\r\n		if(option.domain){\r\n			newvalue += \"; domain=\" + option.domain;\r\n		}\r\n		\r\n		$doc.cookie = newvalue;\r\n		\r\n	}else{\r\n		return (value = $doc.cookie.match('(?:^|;)\\\\s*' + name + '=([^;]*)'))\r\n			? decodeURIComponent(value[1]) : null;\r\n	}\r\n	\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$Class":{"source":"$Class = function(){\r\n    return{\r\n        extend: extend\r\n    };\r\n    function extend(){\r\n        function Class(args){\r\n            if(this instanceof Class){ //已经实例化，调用init\r\n                if(this.init){ //自动new的情况，所有参数都会存在args.____中，否则取全部参数，注意args中不能传递args.____\r\n                    this.init.apply(this, args && args.____ ? args.____ : arguments);\r\n                }\r\n            }else{\r\n                return new Class({\r\n                    ____: arguments\r\n                });\r\n            }\r\n        }\r\n\r\n        Class.prototype = function(prop, source){\r\n            empty.prototype = this.prototype;\r\n            var \r\n            method,\r\n            superMethod,\r\n            superProp = new empty, //通过空函数实现只继承原型\r\n            i;\r\n            for(i in prop){\r\n                method = prop[i];\r\n                superMethod = superProp[i];\r\n                superProp[i] = //需要调用父类的方法，则使用闭包进行包装\r\n                typeof method == 'function' \r\n                && typeof superMethod == 'function'\r\n                && /\\._super\\(/.test(method) //函数体包含._super(      \r\n                ? pack(method, superMethod) : method;\r\n            }\r\n            if(source){\r\n                for(i in source){\r\n                    Class[i] = source[i];\r\n                }\r\n            }\r\n            superProp.constructor = Class;\r\n            superProp.superclass = this;\r\n            return superProp;\r\n            \r\n            function empty(){}\r\n            function pack(method, superMethod){\r\n                return function(){\r\n                    this._super = superMethod;\r\n                    var ret = method.apply(this, arguments);\r\n                    this._super = null;\r\n                    return ret;\r\n                };\r\n            }\r\n        }.apply(this, arguments);\r\n        \r\n        Class.extend = extend; //实现链式，执行Class.extend()时，this自动指向Class\r\n        return Class;\r\n    }\r\n}();","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$tag":{"source":"function $tag(element, nodeName){\r\n    return nodeName\r\n        ? nodeName == element.nodeName\r\n        : element.nodeName;\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$val":{"source":"function $val(element, val){\r\n    return val == undefined\r\n        ? element.value\r\n        : (element.value = val, this);\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$attr":{"source":"function $attr(element, name, value){\r\n	\r\n    if(value === null){\r\n        element.removeAttribute(name);\r\n    }else if(value != undefined){\r\n		\r\n        if(typeof name == 'object'){ //批量设置属性\r\n            for(var attr in name){\r\n                $attr(element, attr, name[attr]);\r\n            }\r\n        }else{\r\n            if(name == 'style'){\r\n                element.style.cssText = value;\r\n            }else{\r\n                if(element[name] != undefined){//优先设置js属性\r\n                    element[name] = value;\r\n                }else{\r\n                    element.setAttribute(name, value, 2);\r\n                }\r\n            }\r\n        }\r\n		\r\n    }else{\r\n		\r\n        if(name == 'style'){\r\n            return element.style.cssText;\r\n        }else{\r\n            if(name == 'href' && element.nodeName == 'A'){\r\n                return element.getAttribute(name, 2);\r\n            }else{\r\n                if(element[name] != undefined){//优先获取js属性\r\n                    return element[name];\r\n                }else{\r\n                    var val = element.getAttribute(name);\r\n                    return val == null ? undefined : val;\r\n                }\r\n            }\r\n        }\r\n		\r\n    }\r\n	\r\n    return this;\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$ready":{"source":"function $ready(callback){\r\n	\r\n    var callbacks = [];\r\n    callbacks.push(callback);\r\n \r\n    //下面这个判断是为了解决DOMContentLoaded之后再调用DOMReady无法触发done函数的问题\r\n    if($doc.addEventListener && $doc.readyState == 'interactive' || $doc.readyState == 'complete'){\r\n        return done();\r\n    }\r\n   \r\n    /*if(/complete|interactive/.test(document.readyState)){ //见blog/p/84.html\r\n        return done();\r\n    }*/\r\n \r\n    if($doc.addEventListener){\r\n		\r\n        $doc.addEventListener('DOMContentLoaded', done, false);\r\n		\r\n    }else{\r\n		\r\n        var tr = setInterval(function(){\r\n            if($doc.body){\r\n                clearInterval(tr);\r\n                done();\r\n            }\r\n        }, 15);\r\n		\r\n    }\r\n \r\n    function done(){\r\n		\r\n        for(var i = 0; i < callbacks.length; i++){\r\n            callbacks[i]();\r\n        }\r\n        callbacks = null;\r\n		\r\n        $ready = function(callback){\r\n            callback();\r\n        };\r\n		\r\n    }\r\n	\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$eventhook":{"source":"$eventhook = {};","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$addevent":{"source":"$addevent = function(){\r\n	\r\n    ($addevent = $doc.addEventListener ? function(element, type, fn){\r\n		\r\n        element.addEventListener(type == 'mousewheel' && $doc.mozHidden !== undefined ? 'DOMMouseScroll' : type, fn, false);\r\n		\r\n    } : function(element, type, fn){\r\n		\r\n        element.attachEvent('on' + type, fn); \r\n		\r\n    }).apply(null, arguments);\r\n	\r\n};","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$removeevent":{"source":"$removeevent = function(){\r\n	\r\n    ($removeevent = $doc.removeEventListener ? function(element, type, fn){\r\n		\r\n        element.removeEventListener(type == 'mousewheel' && $doc.mozHidden !== undefined ? 'DOMMouseScroll' : type, fn, false); \r\n    \r\n	} : function(element, type, fn){\r\n		\r\n        element.detachEvent('on' + type, fn);\r\n		\r\n    }).apply(null, arguments);\r\n	\r\n};","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$event":{"source":"function $event(event){\r\n    return{\r\n        original: event,\r\n        type: event.type,\r\n        keyCode: event.keyCode,\r\n        clientX: event.clientX,\r\n        clientY: event.clientY,\r\n        target: event.target || event.srcElement,\r\n        //fromTarget: event.fromElement || evt.relatedTarget,\r\n        //toTarget: event.toElement || evt.relatedTarget,\r\n        stopPropagation: function(){\r\n            event.stopPropagation \r\n                ? event.stopPropagation() \r\n                : (event.cancelBubble = true);\r\n        },\r\n        preventDefault: function(){\r\n            event.preventDefault \r\n                ? event.preventDefault()\r\n                : (event.returnValue = false);\r\n        },\r\n        mouseKey: ($browser.ie ? {1: 'L', 4: 'M', 2: 'R'} : {0: 'L', 1: 'M', 2: 'R'})[event.button],\r\n        delta: event.type == 'mousewheel' \r\n            ? event.wheelDelta\r\n            : event.type == 'DOMMouseScroll'\r\n                ? event.detail * -40\r\n                : null\r\n    };\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$bind":{"source":"function $bind(element, type, fn, context){\r\n	\r\n    if(!element.__EVENTID__){ //不存在当前元素的事件队列\r\n        $eventhook[element.__EVENTID__ = ++$guid] = [];\r\n    }\r\n	\r\n	var eventqueue = $eventhook[element.__EVENTID__];\r\n	if(!eventqueue[type]){\r\n		\r\n		eventqueue[type] = [];\r\n		\r\n		$addevent(element, type, function(event){\r\n			\r\n			var current;\r\n            var queue = eventqueue[type].slice(0); //copy eventqueue for fire\r\n			while(current = queue.shift()){\r\n                current.fn.call(current.context, $event(event));\r\n            }\r\n			\r\n        });\r\n		\r\n	}\r\n	\r\n    eventqueue[type].push({\r\n        fn: fn,\r\n        context: context || this\r\n    });\r\n	\r\n    return this;\r\n	\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$unbind":{"source":"function $unbind(element, type, fn, context){\r\n	\r\n    var queue = $eventhook[element.__EVENTID__][type], i = 0;\r\n	\r\n    context = context || this;\r\n	\r\n    while(queue[i]){\r\n		\r\n        if(\r\n            queue[i].fn == fn && \r\n            (\r\n                queue[i].context == context || \r\n                $iszelement(context) && context.e == queue[i].context.e\r\n            )\r\n        ){\r\n			\r\n            queue.splice(i, 1);\r\n            break;\r\n			\r\n        }\r\n		\r\n        i++;\r\n		\r\n    }\r\n	\r\n    return this;\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$clone":{"source":"function $clone(element, flag){\r\n    return element = element.cloneNode(flag);\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$replace":{"source":"function $replace(element, newNode){\r\n    element.parentNode.replaceChild($element(newNode), element);\r\n    return this;\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$append":{"source":"function $append(element, newNode, index){\r\n	\r\n    if($isarray(newNode)){\r\n		\r\n        var root = $doc.createDocumentFragment();\r\n        $each(newNode, function(element){\r\n            root.appendChild($element(element));\r\n        });\r\n        newNode = root;\r\n		\r\n    }else{\r\n        newNode = $element(newNode);\r\n    }\r\n    \r\n    if(index == undefined){\r\n        element.appendChild(newNode);\r\n        return this;\r\n    }\r\n	\r\n    var child = element.children;\r\n    if(index > -1){\r\n        child = child[index];\r\n    }else if(index < 0){\r\n        child = child[Math.max(child.length + index + 1, 0)];\r\n    }\r\n	\r\n    if(child){\r\n        child.parentNode.insertBefore(newNode, child);\r\n    }else{\r\n        element.appendChild(newNode);\r\n    }\r\n	\r\n    return this;\r\n	\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$html":{"source":"function $html(element, html){\r\n	\r\n    var type = typeof html, innerHTML = '';\r\n		\r\n    if(type == 'undefined'){\r\n		\r\n        return element.innerHTML;\r\n		\r\n    }else if(type == 'function'){\r\n		\r\n        innerHTML = html();\r\n		\r\n    }else if(type == 'object'){\r\n		\r\n        $each(html, function(html){\r\n            innerHTML += html;\r\n        });\r\n		\r\n    }else{\r\n		\r\n        innerHTML = html;\r\n		\r\n    }\r\n	\r\n    if(element.nodeName == 'SELECT' && type != 'undefined' && $browser.ie){\r\n		\r\n        var container = document.createElement('div');\r\n        container.innerHTML = '<select>' + innerHTML + '</select>';\r\n        element.innerHTML = '';\r\n        $each($query('option', container), function(option){\r\n            element.appendChild(option);\r\n        });\r\n		\r\n    }else{\r\n		\r\n        element.innerHTML = innerHTML;\r\n		\r\n    }\r\n	\r\n    return this;\r\n	\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$remove":{"source":"function $remove(element){\r\n    element.parentNode.removeChild(element);\r\n    return this;\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$insert":{"source":"function $insert(element, newNode, flag){\r\n	\r\n    newNode = $element(newNode);\r\n	\r\n    if(flag){\r\n		\r\n        while(element.nextSibling){\r\n            element = element.nextSibling;\r\n            if(element.elementType == 1){\r\n                element.parentNode.insertBefore(newNode, element);\r\n                return this;\r\n            }\r\n        }\r\n        element.parentNode.appendChild(newNode);\r\n		\r\n    }else{\r\n		\r\n        element.parentNode.insertBefore(newNode, element);\r\n		\r\n    }\r\n	\r\n    return this;\r\n	\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$parent":{"source":"function $parent(element, expression){\r\n	\r\n    if(expression == undefined){\r\n		\r\n        return element.parentNode;\r\n		\r\n    }else if(expression > 0){\r\n		\r\n        expression++;\r\n        while(expression--){\r\n            element = element.parentNode;\r\n        }\r\n		\r\n        return element;\r\n		\r\n    }else{\r\n		\r\n        expression = expression.match(/^(?:#([\\w\\-]+))?\\s*(?:(\\w+))?(?:.([\\w\\-]+))?(?:\\[(.+)\\])?$/);\r\n        if(expression){\r\n			\r\n            var id = expression[1],\r\n                tag = expression[2],\r\n                cls = expression[3],\r\n                attr = expression[4];\r\n				\r\n            tag = tag && tag.toUpperCase();\r\n            attr = attr && attr.split('=');\r\n			\r\n        }else{\r\n            return null;\r\n        }\r\n        \r\n        while(element = element.parentNode){\r\n            if(\r\n                (!id || element.id == id)\r\n                && (!cls || cls && $hasclass(element, cls))\r\n                && (!tag || element.nodeName == tag)\r\n                && (!attr || $attr(element, attr[0]) == attr[1])\r\n            ){\r\n                return element;\r\n            }\r\n        }\r\n        \r\n    }\r\n	\r\n    return null;\r\n	\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$prev":{"source":"function $prev(element){\r\n    while(element = element.previousSibling){\r\n        if(element.nodeType == 1){\r\n            return element;\r\n        }\r\n    }\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$next":{"source":"function $next(element){\r\n    while(element = element.nextSibling){\r\n        if(element.nodeType == 1){\r\n            return element;\r\n        }\r\n    }\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$child":{"source":"function $child(element, index){\r\n	\r\n    var child = element.children;\r\n	\r\n    if(index > -1){\r\n		\r\n        child = child[index];\r\n		\r\n    }else if(index < 0){\r\n		\r\n        child = child[child.length + index];\r\n		\r\n    }else if(typeof index == 'string'){\r\n		\r\n        var returns = [];\r\n        $each($query(index, element) || returns, function(element){\r\n            (element.parentNode == element) && returns.push(element);\r\n        });\r\n		\r\n        return returns.length ? returns : null;\r\n		\r\n    }else{\r\n		\r\n        var returns = [];\r\n        for(var i = 0; i < child.length; i++){\r\n            returns.push(child[i]);\r\n        }\r\n        return returns;\r\n		\r\n    }\r\n	\r\n    return child;\r\n	\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$query":{"source":"function $query(){\r\n    var\r\n    suportSel = $doc.querySelectorAll,\r\n    rQuickExpr = /^([#.])?([\\w\\-]+|\\*)$/,\r\n    rChildExpr = /^([\\w-]+)?(?:\\.([\\w\\-]+))?(?:\\[(.+)\\])?$/, //tag.cls[attr=val]\r\n    rChildStr = /(?:[\\w\\-]+)?(?:\\.[\\w\\-]+)?(?:\\[.+\\])?/.source,\r\n    rAllExpr = RegExp('^(#[\\\\w\\\\-]+|'+rChildStr+')(?:\\\\s+('+rChildStr+'))$');\r\n	\r\n    return ($query = query).apply(null, arguments);\r\n    \r\n    function query(selector, context){\r\n		\r\n        var \r\n        sItems,\r\n        sType,\r\n        sWord,\r\n        elems;\r\n		\r\n        if(sItems = rQuickExpr.exec(selector)){ //单级选择器，快速模式\r\n		\r\n            sType = sItems[1];\r\n            sWord = sItems[2];\r\n			\r\n            if(sType == '#'){\r\n                return (context || $doc).getElementById(sWord);\r\n            }\r\n			\r\n            if(sType == '.'){\r\n                if($doc.getElementsByClassName){\r\n                    return makeArray(\r\n                        (context || $doc).getElementsByClassName(sWord)\r\n                    );\r\n                }else{\r\n                   return filterByClassName(query('*', context), sWord);\r\n                }\r\n            }\r\n            \r\n            return makeArray(\r\n                (context || $doc).getElementsByTagName(sWord)\r\n            );\r\n        }\r\n		\r\n        if(suportSel){\r\n			\r\n            if(!context || context == $doc){\r\n                elems = $doc.querySelectorAll(selector);\r\n            }else{\r\n                var \r\n                oldId = context.id,\r\n                fixId = 'theIdForHelpQuery';\r\n                selector = '#' + (context.id = fixId) + ' '+ selector;\r\n                if(selector.indexOf(',')>0){\r\n                    selector = selector.replace(/,/g, ','+fixId+' ');\r\n                }\r\n                elems = context.querySelectorAll(selector);  \r\n                oldId ? context.id = oldId : context.removeAttribute('id');\r\n            }\r\n			\r\n        }else{\r\n            if(/,/.test(selector)){\r\n                elems = [];\r\n                forEach(selector.split(','), function(selector){\r\n                    var es = query(selector, context);\r\n                    es.length ? elems = elems.concat(es) : elems.push(es);\r\n                });\r\n            }else{\r\n                sItems = rAllExpr.exec(selector); //二级选择器\r\n                if(sItems){\r\n                    var \r\n                    contexts = query(sItems[1], context), //先取前面的表达式作为限定\r\n                    sChild = sItems[2];\r\n                    if(contexts){\r\n                        elems = [];\r\n                        forEach($isarray(contexts) ? contexts : [contexts], function(context){\r\n                            var es = query(sChild, context);\r\n                            es.length ? elems = elems.concat(es) : elems.push(es); \r\n                        });\r\n                    }else{\r\n                        return null;\r\n                    }\r\n                }else{\r\n                    sItems = rChildExpr.exec(selector); //单级选择器，附带属性等多字段\r\n                    if(sItems){\r\n                        var \r\n                        tag = sItems[1] || '*',\r\n                        cls = sItems[2],\r\n                        attr = sItems[3];\r\n                        elems = query(tag, context);\r\n                        cls && (elems = filterByClassName(elems, cls));\r\n                        attr && (elems = filterByAttr(elems, attr));\r\n                    }else{\r\n                        return null;\r\n                    }\r\n                        \r\n                }\r\n            }\r\n        }\r\n        return elems && elems.length\r\n            ? (/,/.test(selector) ? unique : makeArray)(elems)\r\n            : null;\r\n    }\r\n    \r\n    function filterByClassName(elems, clsName){\r\n        var\r\n        ret = [],\r\n        rClsName = RegExp('(^|\\\\s+)'+ clsName +'($|\\\\s+)');\r\n\r\n        forEach(elems, function(elem){\r\n            rClsName.test(elem.className) && ret.push(elem); \r\n        });\r\n        return ret.length ? ret : null;\r\n    }\r\n    \r\n    function filterByAttr(elems, attr){\r\n        var\r\n        ret = [],\r\n        match = /([\\w-]+)(!=|=)?(\\S+)?/.exec(attr),\r\n        name = match[1],\r\n        type = match[2],\r\n        value = match[3];\r\n\r\n        forEach(elems, function(elem){\r\n            if(value){\r\n                var val = elem.getAttribute(key);\r\n                if(\r\n                    type == '=' && val == value ||\r\n                    type == '!=' && val != value\r\n                ){\r\n                    ret.push(elem);\r\n                }\r\n                 \r\n            }else{\r\n                elem.hasAttribute(name) && ret.push(elem);\r\n            }\r\n        });\r\n        return ret.length ? ret : null;\r\n    }\r\n    \r\n    function forEach(arr, fn){\r\n        if(arr && arr.length){\r\n            for(var i = 0, len = arr.length; i < len; i++){\r\n                fn(arr[i], i);\r\n            }\r\n        }\r\n    }\r\n    \r\n    function makeArray(nodelist){\r\n        \r\n        var ret;\r\n        try{\r\n            ret = [].slice.call(nodelist, 0);\r\n        }catch(e){\r\n            ret = [];\r\n            forEach(nodelist, function(elem){\r\n               ret.push(elem); \r\n            });\r\n        }\r\n        return ret.length ? ret : null;\r\n    }\r\n    \r\n    function unique(elems){\r\n        var ret = [];\r\n        forEach(elems, function(elem){\r\n            if(!elem.getAttribute('__forUnique__')){\r\n                elem.setAttribute('__forUnique__', 1);\r\n                ret.push(elem);\r\n            }\r\n        });\r\n        forEach(ret, function(elem){\r\n            elem.removeAttribute('__forUnique__');\r\n        });\r\n        return ret;\r\n    }\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$hasclass":{"source":"function $hasclass(element, className){\r\n    return RegExp('(^|\\\\s)' + className + '($|\\\\s)').test(element.className);\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$cls":{"source":"function $cls(element, cls, cls2){\r\n    if(cls2){\r\n        if(element.className){\r\n            element.className = (' ' + element.className + ' ')\r\n                .replace(RegExp('\\\\s+(' + cls2 + ')(?=\\\\s+)'), cls)\r\n                .replace(/^\\s+|\\s+$/g, '');//清除头尾空格;\r\n        }\r\n    }else if(cls){\r\n        var _exp = cls.charAt(0),\r\n            _cls = cls.substr(1);\r\n        if(/[+~-]/.test(_exp)){\r\n            var \r\n            ncls = element.className;\r\n            _cls = _cls.split(',');\r\n            switch(_exp){\r\n                case '+':\r\n                    if(ncls){//假如不为空，需要判断是否已经存在\r\n                    \r\n                        $each(_cls, function(val, i){\r\n                            if(!$hasclass(element, val)){\r\n                                element.className += ' ' + val;\r\n                            }\r\n                        });\r\n                    }else{\r\n                        element.className = _cls.join(' ');\r\n                    }\r\n                    break;\r\n                case '-':\r\n                    if(ncls){\r\n                        element.className = (' ' + ncls + ' ')\r\n                            .replace(RegExp('\\\\s+(' + _cls.join('|') + ')(?=\\\\s+)', 'g'), '')//替换存在的className\r\n                            .replace(/^\\s+|\\s+$/g, '');//清除头尾空格\r\n                    }\r\n                    break;\r\n                case '~':\r\n                    if(ncls){\r\n                        $each(_cls, function(val, i){\r\n                            if(!$hasclass(element, val)){\r\n                                element.className += ' ' + val;\r\n                            }else{\r\n                                $cls(element, '-'+ val);\r\n                            }\r\n                        });\r\n                    }else{\r\n                        element.className = _cls.join(' ');\r\n                    }\r\n                    break;\r\n            }\r\n        }else if(_exp == '='){\r\n            element.className = _cls;\r\n            return this;\r\n        }else{\r\n            _cls = cls.split(',');\r\n            var ret = true;\r\n            $each(_cls, function(val, i){\r\n                return !(ret = ret && $hasclass(element, val));\r\n            });\r\n            return ret;\r\n        }\r\n    }else{\r\n        return element.className;\r\n    }\r\n    return this;\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$offset":{"source":"function $offset(element){\r\n    var top = 0, left = 0;\r\n    if ('getBoundingClientRect' in $de){\r\n        var \r\n        box = element.getBoundingClientRect(), \r\n        body = $doc.body, \r\n        clientTop = $de.clientTop || body.clientTop || 0, \r\n        clientLeft = $de.clientLeft || body.clientLeft || 0,\r\n        top  = box.top  + ($win.pageYOffset || $de && $de.scrollTop  || body.scrollTop ) - clientTop,\r\n        left = box.left + ($win.pageXOffset || $de && $de.scrollLeft || body.scrollLeft) - clientLeft;\r\n    }else{\r\n        do{\r\n            top += element.offsetTop || 0;\r\n            left += element.offsetLeft || 0;\r\n            element = element.offsetParent;\r\n        } while (element);\r\n    }\r\n    return {left: left, top: top, width: element.offsetWidth, height: element.offsetHeight};\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$cssnum":{"source":"function $cssnum(element, attr){\r\n    var val = +$rmvpx($css(element, attr)) || 0;\r\n    if(/^width|height|left|top$/.test(attr)){\r\n        switch(attr){\r\n            case 'left': return val || element.offsetLeft - $cssnum(element, 'marginLeft');\r\n            case 'top': return val || element.offsetTop - $cssnum(element, 'marginTop');\r\n            case 'width': return val\r\n                || (element.offsetWidth\r\n                    - $cssnum(element, 'paddingLeft')\r\n                    - $cssnum(element, 'paddingRight')\r\n                    - $cssnum(element, 'borderLeftWidth')\r\n                    - $cssnum(element, 'borderRightWidth')\r\n                );\r\n            case 'height': return val\r\n                || (element.offsetHeight\r\n                    - $cssnum(element, 'paddingTop')\r\n                    - $cssnum(element, 'paddingBottom')\r\n                    - $cssnum(element, 'borderTopWidth')\r\n                    - $cssnum(element, 'borderBottomWidth')\r\n                );\r\n        }\r\n    }\r\n    return val;\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$left":{"source":"function $left(element, value){\r\n    if(value != undefined){\r\n        $css(element, 'left', value);\r\n        return this;\r\n    }\r\n    return $cssnum(element, 'left');\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$top":{"source":"function $top(element, value){\r\n    if(value != undefined){\r\n        $css(element, 'top', value);\r\n        return this;\r\n    }\r\n    return $cssnum(element, 'top');\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$width":{"source":"function $width(element, value){\r\n    if(value != undefined){\r\n        $css(element, 'width', value);\r\n        return this;\r\n    }\r\n    return $cssnum(element, 'width');\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$height":{"source":"function $height(element, value){\r\n    if(value != undefined){\r\n        $css(element, 'height', value);\r\n        return this;\r\n    }\r\n    return $cssnum(element, 'height');\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$show":{"source":"function $show(element){\r\n    element.style.display = 'block';\r\n    return this;\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$hide":{"source":"function $hide(element){\r\n    element.style.display = 'none';\r\n    return this;\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$opacity":{"source":"function $opacity(element, opacity){\r\n    if($browser.ie && $browser.ie < 9){\r\n        var \r\n        filter = element.currentStyle && element.currentStyle.filter,\r\n        hasAlpha = filter && /alpha/i.test(filter),\r\n        filterStr;\r\n        if(opacity === undefined){\r\n            if(hasAlpha){\r\n                return +filter.match(/opacity[\\s:=]+(\\d+)/i)[1]/100;\r\n            }\r\n            return 1;\r\n        }\r\n        \r\n        if(opacity >= 1 || opacity == null){\r\n            // IE6-8设置alpha(opacity=100)会造成文字模糊\r\n            filterStr = filter.replace(/alpha[^\\)]+\\)/i, '');\r\n        }else{\r\n            opacity = Math.round(opacity * 100);//必须转成整数\r\n            if(hasAlpha){\r\n                filterStr = filter.replace(/(opacity\\D+)\\d+/i, 'opacity='+ opacity);\r\n            }else{\r\n                filterStr = filter +' '+ 'alpha(opacity=' + opacity + ')';\r\n            }\r\n        } \r\n        element.style.filter = filterStr;\r\n    }else{\r\n        if(opacity === undefined){\r\n            return (opacity = +$css(element, 'opacity')) > -1 ? opacity : 1;\r\n        }\r\n        element.style.opacity = opacity;\r\n    }\r\n    return this;\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$addpx":{"source":"function $addpx(attr,val){\r\n    return val + (\r\n        /width|height|left|top|right|bottom|margin|padding/.test(attr) \r\n        && /^[\\-\\d.]+$/.test(val)\r\n        ? 'px' : '');\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$rmvpx":{"source":"function $rmvpx(val){\r\n    return /px$/.test(val) ? parseFloat(val) : val;\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$fixStyleName":{"source":"function $fixStyleName(name){\r\n    if(name == 'float'){\r\n        return $win.getComputedStyle ? 'cssFloat' : 'styleFloat';\r\n    }\r\n    return name.replace(/-(\\w)/g, function(_, aftername){\r\n        return aftername.toUpperCase();\r\n    });\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$css":{"source":"function $css(element, name, value){\r\n    if(value !== undefined){\r\n        \r\n        name == 'opacity' && $browser.ie < 9\r\n            ? $opacity(element, value)\r\n            : (element.style[name = $fixStyleName(name)] = \r\n                value < 0 && /width|height|padding|border/.test(name) \r\n                    ? 0 //修正负值\r\n                    : value + (/width|height|left|top|right|bottom|margin|padding/.test(name) && /^[\\-\\d.]+$/.test(value) \r\n                        ? 'px'  //增加省略的px\r\n                        : '')\r\n            );        \r\n    }else if(typeof name == 'object'){\r\n        for(var key in name){\r\n            $css(element, key, name[key]);\r\n        }\r\n    }else{\r\n        if(~name.indexOf(':')){ //存在:,比如'background:red'\r\n            $each(name.replace(/;$/, '').split(';'), function(cssText){      \r\n                cssText = cssText.split(':');\r\n                $css(element, cssText.shift(), cssText.join(':'));\r\n                //?$css(element,cssText[0],cssText[1]);//background:url(http://www....)bug\r\n            });\r\n        }else{\r\n            return name == 'opacity' && $browser.ie < 9\r\n                ? $opacity(element)\r\n                : element.style && element.style[name = $fixStyleName(name)]\r\n                    || (element.currentStyle || getComputedStyle(element, null))[name];\r\n        }\r\n    }\r\n    return this;\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$contains":{"source":"function $contains(pnode, cnode){\r\n    return cnode == pnode\r\n        ? 1 : pnode.contains \r\n            ? pnode.contains(cnode) \r\n                ? 2 : 0\r\n            : pnode.compareDocumentPosition(cnode)\r\n                ? 2 : 0;\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$pid":{"source":"$pid = 1;","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$guid":{"source":"$guid = 1;","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$win":{"source":"$win = window;","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$doc":{"source":"$doc = document;","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$de":{"source":"$de = $doc.documentElement;","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$head":{"source":"$head = $doc.head || $query('head')[0];","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$p":{"source":"$p = $zelement.prototype;","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$noop":{"source":"function $noop(){}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$isarray":{"source":"function $isarray(obj){\r\n    return {}.toString.call(obj) == '[object Array]';\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$log":{"source":"$log = function(){\r\n    var \r\n    PDSTR = '    ',\r\n    data,\r\n    box;\r\n    log.clear = function(){\r\n        if(box){\r\n            box.innerHTML = '';\r\n        }\r\n    };\r\n    return log;\r\n    function log(title, text){\r\n        if(text === undefined){\r\n            text = title;\r\n            title = '';\r\n        }\r\n        if(box){\r\n            if(text != undefined){\r\n                text = serialize(text, 0);\r\n                text = text.replace(/&/g, '&amp;').replace(/</g, '&lt;');\r\n                text = (title ? ''+ title +' => \\n':'')+ text;\r\n                if($browser.ie < 8){\r\n                    text = text.replace(/ /g, '&nbsp;').replace(/\\n/g, '<br>');\r\n                }\r\n                $append(box, '<li>'+text+'</li>');\r\n            }\r\n        }else if(document.body){ //初始化console容器，并输出已经存在的数据\r\n            clearInterval(timer);\r\n            var wrap = $element('<div id=\"Zlog\">\\\r\n                <h3>点击隐藏控制台<span>清除</span></h3>\\\r\n                <ol></ol>\\\r\n            </div>');\r\n            box = $query('ol', wrap)[0];\r\n            $style(\r\n                '#Zlog{position:absolute; z-index:9999; left:2px; top:2px; width:260px; font:12px/20px  monaco, \"microsoft yahei\"; color:#333}\\\r\n                #Zlog ol{margin:0; padding:0}\\\r\n                #Zlog h3,\\\r\n                #Zlog li{margin:1px; padding:4px; overflow:hidden; *height:20px; list-style:none; border:1px solid #999; border-radius:4px; background:#eee; text-overflow:ellipsis; white-space:nowrap; cursor:pointer}\\\r\n                #Zlog h3{position:relative; font-size: 12px}\\\r\n                #Zlog h3 span{position:absolute; right:8px;}\\\r\n                #Zlog .view{*height:auto; width:auto; white-space:pre; overflow:auto; background: #666; color:#eee}\\\r\n                #Zlog.hide{display:block!important; left:0; top:0; overflow: hidden; width:16px; height:16px; background:#000; opacity:0.1; filter:alpha(opacity=10); cursor:pointer;}\\\r\n                #Zlog.hide h3,\\\r\n                #Zlog.hide ol{display: none}'\r\n            );\r\n            document.body.appendChild(wrap);\r\n        \r\n            !function(){\r\n                var curView = null;\r\n                $query('span', wrap)[0].onclick = log.clear;\r\n                wrap.onclick = function(e){\r\n                    var target = e ? e.target : event.srcElement;\r\n                    if($cls(target, 'hide')){\r\n                        $cls(target, '-hide');\r\n                    }else if($tag(target) == 'H3'){\r\n                        $cls(wrap, '+hide');\r\n                    }else if($tag(target) == 'LI'){\r\n                        if(curView){\r\n                            if(target != curView){\r\n                                hideItem(curView);\r\n                                showItem(curView = target);\r\n                            }else{\r\n                                hideItem(curView);\r\n                                curView = null;\r\n                            }\r\n                        }else{\r\n                            showItem(curView = target);\r\n                        }\r\n                    }\r\n                };\r\n\r\n                function showItem(target){\r\n                    $cls(target, '~view');\r\n                    $width(target, target.scrollWidth+30);\r\n                    \r\n                }\r\n\r\n                function hideItem(target){\r\n                    $css(target, 'width:auto');\r\n                    $cls(target, '~view');\r\n                }\r\n\r\n            }();\r\n            if(data){\r\n                for(var i = 0; i < data.length; i++){\r\n                    log(data[i].title, data[i].text);\r\n                }\r\n            }\r\n            log(title, text);\r\n        }else{\r\n            if(!data){\r\n                data = [];\r\n            }\r\n            data.push({\r\n                title: title,\r\n                text: text\r\n            });\r\n            var timer = setInterval(function(){ //假如在body就绪后没调用log，那么就让定时器主动触发\r\n                if(document.body){\r\n                    clearInterval(timer);\r\n                    log();\r\n                }\r\n            }, 15);\r\n        }\r\n    }\r\n    function serialize(obj, level){\r\n        var type = typeof obj;\r\n        if(type == 'object'){\r\n            level++;\r\n            var paddingBlank = Array(level+1).join(PDSTR);\r\n            if(obj === null){\r\n                return 'null';\r\n            }else if({}.toString.call(obj) == '[object Array]'){\r\n                var arr = [];\r\n                for(var i = 0; i < obj.length; i++){\r\n                    arr.push(paddingBlank+i+' => '+serialize(obj[i], level));\r\n                }\r\n                if(arr.length){\r\n                    return  '[\\n'+arr.join(',\\n')+'\\n'+paddingBlank.substr(PDSTR.length)+']';\r\n                }else{\r\n                    return'[ ]';\r\n                }\r\n            }else{\r\n                \r\n                var arr = [];\r\n                for(var key in obj){\r\n                    arr.push(paddingBlank+key+' => '+serialize(obj[key], level));\r\n                }\r\n                if(arr.length){\r\n                    return  '{\\n'+arr.join(',\\n')+'\\n'+paddingBlank.substr(PDSTR.length)+'}';\r\n                }else{\r\n                    return'{ }';\r\n                }\r\n                \r\n            }\r\n        \r\n        }else if(type == 'string'){\r\n            return '\"'+obj.toString().replace(/\\\\/g, '\\\\\\\\').replace(/\"/g, '\\\\\"')+'\"';\r\n        }else if(type == 'function'){\r\n            var len = 40;\r\n            \r\n             return (Array(len).join(' ') + obj)\r\n                .replace(/\\r/g, '')\r\n                //.replace(/\\n/g, '@')\r\n                .replace(/^\\s+$/gm, '')\r\n                .replace(/^\\s*/gm, function(match){ //找到在函数每行前面的最小空白\r\n                    len = Math.min(match.length, len);\r\n                    return match\r\n                })\r\n                .replace(/^\\s+/mg, function(match){  //将前方的空白移除一部分\r\n                    return match.substr(len);\r\n                })\r\n                .replace(/^/mg, Array(level+1).join(PDSTR))\r\n                .replace(RegExp('^(\\\\s|'+PDSTR+')+'), '');\r\n        }else{\r\n            return ''+obj;\r\n        }\r\n    }\r\n}();","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$each":{"source":"function $each(obj, fn){\r\n	\r\n    if($isarray(obj)){\r\n		\r\n        for(var i = 0, len = obj.length; i < len; i++){\r\n            if(fn.call(null, obj[i], i)){\r\n                break;\r\n            }\r\n        }\r\n		\r\n    }else{\r\n		\r\n        for(var i in obj){\r\n            if(obj.hasOwnProperty(i) && fn.call(null, obj[i], i)){\r\n                break;\r\n            }\r\n        }\r\n		\r\n    }\r\n	\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$param":{"source":"function $param(data, timestamp){\r\n	\r\n    var query = [];\r\n    $each(data, function(val, key){\r\n        query.push(key + '=' + encodeURIComponent(val));\r\n    });\r\n	\r\n    timestamp && query.push('t=' + +new Date);\r\n	\r\n    return query.join('&');\r\n	\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$mix":{"source":"function $mix(target, source){\r\n    $each(source, function(val, key){\r\n        target[key] = val;\r\n    });\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$tojson":{"source":"function $tojson(obj){\r\n    switch(typeof obj){\r\n        case 'object':\r\n            if(obj == null){\r\n                return obj;\r\n            }\r\n            var json = [];\r\n            if({}.toString.apply(obj) == '[object Array]'){\r\n                for(var i = 0, len = obj.length; i < len; i++){\r\n                    json[i] = $tojson(obj[i]);\r\n                }\r\n                return '[' + json.join(',') + ']';\r\n            }\r\n            for(var key in obj){\r\n                json.push('\"' + key + '\":' + $tojson(obj[key]));\r\n            }\r\n            return '{' + json.join(',') + '}';\r\n        case 'function':\r\n            obj = '' + obj;\r\n        case 'string':\r\n            return '\"' + obj.replace(/\\\\/g, '\\\\\\\\').replace(/\"/g, '\\\\\"').replace(/\\r/g, '\\\\r').replace(/\\n/g, '\\\\n') + '\"';\r\n        case 'number':\r\n        case 'boolean':\r\n        case 'undefined':\r\n            return obj;\r\n    }    \r\n    return obj;\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$XHR":{"source":"$XHR = $win.XMLHttpRequest || function(){ //ie6下使用遍历来获得最高版本的xmlhttp\r\n    var xhrProgid = [0, 'Microsoft.XMLHTTP', 'Msxml2.XMLHTTP', 'Msxml2.XMLHTTP.6.0'],\r\n        i = 4,\r\n        xhr;\r\n    while(--i){\r\n        try{\r\n            new ActiveXObject(xhr = xhrProgid[i]);\r\n            return function(){return new ActiveXObject(xhr)};\r\n        }catch(e){}\r\n    }\r\n}();","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$ajax":{"source":"function $ajax(options){\r\n    var \r\n    t1 = +new Date,\r\n    xhr = new $XHR,\r\n    callback = options.callback,\r\n    headers = options.headers,\r\n    key;\r\n    xhr.open(options.type || 'get', options.url, options.async || true);\r\n    for(key in headers) { //设置发送的头\r\n        xhr.setRequestHeader(key, headers[key]);\r\n    }\r\n    xhr.onreadystatechange = function(){\r\n        xhr.readyState == 4 && callback && callback(\r\n            xhr.status == 200 \r\n            ? options.responseType \r\n                ? xhr[options.responseType] \r\n                : xhr\r\n            : null\r\n        );\r\n    };\r\n    xhr.send(options.data || null);\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$post":{"source":"function $post(url, callback, data){ //post经典版封装\r\n    $ajax({\r\n        url: url,\r\n        type: 'post',\r\n        data: typeof data == 'object' ? $param(data) : data,\r\n        callback: function(responseText){\r\n            callback(responseText);\r\n        },\r\n        responseType: 'responseText',\r\n        headers: { //post必须给http头设置Content-Type\r\n            'Content-Type': 'application/x-www-form-urlencoded'\r\n        }\r\n    });\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$get":{"source":"function $get(url, callback, data){ //get经典版封装\r\n    $ajax({\r\n        url: url + (data ? '?'+ (typeof data == 'object' ? $param(data) : data) : ''),\r\n        callback: function(responseText){\r\n             callback(responseText);\r\n        },\r\n        responseType: 'responseText'\r\n    });\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$img":{"source":"function $img(url, callback){\r\n    var img = new Image;\r\n    img.src = url;\r\n    \r\n    if(img.complete){\r\n        return done(img);\r\n    }\r\n    img.onload = function () {\r\n        done(img);\r\n    };\r\n    img.onerror = function(){\r\n        done(null);\r\n    };\r\n    function done(result){\r\n        img.onload = img.onerror = null;\r\n        callback && callback(result, result);\r\n    }\r\n    return this;\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$js":{"source":"function $js(src, callback, charset){\r\n    var \r\n    script = $doc.createElement('script'),\r\n    done = function(){\r\n        callback && callback();\r\n        $de.removeChild(script);\r\n    };\r\n    charset && (script.charset = charset);\r\n    script.src = src;\r\n    'onload' in script ? script.onload = done : script.onreadystatechange = function(){\r\n        /loaded|complete/.test(script.readyState) && done();\r\n    };\r\n    $de.appendChild(script);\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$style":{"source":"function $style(cssText){\r\n    $isarray(cssText) && (cssText = cssText.join(''));\r\n    if(/\\{[\\w\\W]+?\\}/.test(cssText)){ //cssText\r\n        var style = $doc.createElement('style');\r\n        style.type = 'text/css';\r\n        style.styleSheet && (style.styleSheet.cssText = cssText.replace(/opacity:\\s*(0?\\.\\d+)/g, function(mc, opacity){\r\n            return 'filter:alpha(opacity='+parseInt(opacity*100)+')';\r\n        })) || style.appendChild($doc.createTextNode(cssText));	\r\n    }else{\r\n        style = $doc.createElement('link');\r\n        style.rel = 'stylesheet';\r\n        style.href = cssText;\r\n    }\r\n    $head.appendChild(style);\r\n    return this;\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$jsonp2":{"source":"function $jsonp2(url, callback, charset, timeout){\r\n    var s = $doc.createElement('script'),\r\n        callbackName = 'json' + (++$GUID),\r\n        tr = setTimeout(function(){//超时则放弃请求\r\n            $head.removeChild(s);\r\n            delete $win[callbackName];\r\n        }, timeout || 10000);\r\n    \r\n    $win[callbackName] = function(result){\r\n        clearTimeout(tr);\r\n        callback(result);\r\n    };\r\n    s.src = 'http://jsonp2.1kjs.com/?' + $param({\r\n        charset: charset || 'utf-8',\r\n        callback: callbackName,\r\n        e_url: url\r\n    }, true);\r\n    charset && (s.charset = charset);\r\n    $head.appendChild(s);\r\n    if(s.readyState){\r\n        s.onreadystatechange = function(){\r\n            if(s.readyState == 'loaded' || s.readyState == 'complete'){\r\n                //callback&&callback();\r\n                $head.removeChild(s);\r\n            }\r\n        };\r\n    }else{\r\n        s.onload = function(){\r\n            //callback&&callback();\r\n            $head.removeChild(s);\r\n        };\r\n    }\r\n    return this;\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$jsonp3":{"source":"function $jsonp3(url, callback, charset, timeout){\r\n    var s = $doc.createElement('script'),\r\n        callbackName = 'json' + (++$GUID),\r\n        tr = setTimeout(function(){//超时则放弃请求\r\n            $head.removeChild(s);\r\n            delete $win[callbackName];\r\n        }, timeout || 10000);\r\n    \r\n    $win[callbackName] = function(result){\r\n        clearTimeout(tr);\r\n        callback(result);\r\n    };\r\n    s.src = 'http://jsonp66.sinaapp.com/?' + $param({\r\n        charset: charset || 'utf-8',\r\n        callback: callbackName,\r\n        e_url: url\r\n    }, true);\r\n    charset && (s.charset = charset);\r\n    $head.appendChild(s);\r\n    if(s.readyState){\r\n        s.onreadystatechange = function(){\r\n            if(s.readyState == 'loaded' || s.readyState == 'complete'){\r\n                //callback&&callback();\r\n                $head.removeChild(s);\r\n            }\r\n        };\r\n    }else{\r\n        s.onload = function(){\r\n            //callback&&callback();\r\n            $head.removeChild(s);\r\n        };\r\n    }\r\n    return this;\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$encodehtml":{"source":"function $encodehtml(str){\r\n    return str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$decodehtml":{"source":"function $decodehtml(str){\r\n    return str.replace(/&lt;/g, '<').replace(/&gt;/g, '>').replace(/&amp;/g, '&');\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$encodeurl":{"source":"function $encodeurl(str){\r\n    return str\r\n        .replace(/%/g, '%25')\r\n        .replace(/ /g, '%20')\r\n        .replace(/#/g, '%23')\r\n        .replace(/&/g, '%26')\r\n        .replace(/=/g, '%3D')\r\n        .replace(/\\//g, '%2F')\r\n        .replace(/\\?/g, '%3F')\r\n        .replace(/\\+/g, '%2B');\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$tirm":{"source":"function $tirm(str){\r\n    return str.replace(/^\\s+|\\s+$/g, '');\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$parsejson":{"source":"function $parsejson(str){\r\n    try{\r\n        str = $tirm(str);\r\n        if(!str.replace(/\"(?:\\\\\\\\|\\\\\\\"|[^\"])*\"|[\\s{}\\[\\]:\\d.,-]+|true|false|null|undefined/g, '')){ //说明JSON数据符合要求\r\n            return Function('return ' + str)();\r\n        }\r\n    }catch(e){\r\n		throw new SyntaxError('JSON.parse');\r\n	}\r\n    \r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$rstr":{"source":"function $rstr(str, data){\r\n	\r\n	if(typeof str == 'function'){\r\n		str += '';\r\n		str = str.match(/function\\s*\\(\\)\\{\\/\\*([\\w\\W]+?)\\*\\//)[1];\r\n		str = str.replace(/^\\s+|\\s+$/g, '');\r\n	}else{\r\n		str += '';\r\n	}\r\n	\r\n	if(arguments.length == 1){\r\n		return str;\r\n	}\r\n	\r\n	if(typeof data == 'object'){\r\n		\r\n		if({}.toString.call(data) == '[object Array]'){\r\n			\r\n			var rst = '';\r\n			for(var i = 0; i < data.length; i++){\r\n				rst += $rstr(str, data[i]);\r\n			}\r\n			return rst;\r\n			\r\n		}else{\r\n			\r\n			return str.replace(/\\{([$\\w]+)\\}/g, function(match, key){\r\n				\r\n				if(key in data){\r\n					return data[key];\r\n				}\r\n				\r\n				return match;\r\n				\r\n			});\r\n			\r\n		}\r\n		\r\n	}else{\r\n		\r\n		var args = arguments, argslen = args.length;\r\n		return str.replace(/\\{%(\\d+)\\}/g, function(match, index){\r\n			\r\n			index++;\r\n			if(index < argslen){\r\n				return args[index];\r\n			}\r\n			\r\n			return match;\r\n			\r\n		});\r\n\r\n	}\r\n	\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$scrollTop":{"source":"$scrollTop = function(){\r\n    var tr,\r\n        cr = $browser.chrome || $browser.opera;\r\n    return function(y, t, tp){\r\n        var ds = cr ? $doc.body : $de;\r\n        switch(arguments.length){\r\n            case 0: return ds['scrollTop'];\r\n            case 1: return ds['scrollTop'] = y;\r\n            default: {\r\n                var s0 = 0,\r\n                    s1 = Math.ceil(t/15),\r\n                    z0 = ds['scrollTop'],\r\n                    tp = function(t,b,c,d){\r\n                        return c * Math.sqrt(1 - (t=t/d-1)*t) + b;\r\n                    },\r\n                    zc = y - z0;\r\n                clearTimeout(tr);\r\n                run();\r\n                \r\n            }\r\n        }\r\n        function run(){\r\n            tr = setTimeout(function(){\r\n                if(s0 < s1){ \r\n                    ds['scrollTop'] = tp(s0, z0, zc, s1);\r\n                    run();\r\n                }else{\r\n                    ds['scrollTop'] = y;\r\n                    clearTimeout(tr);\r\n                }\r\n                s0++;\r\n            }, 15);\r\n        }\r\n    };\r\n}();","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$Easing":{"source":"$Easing = {\r\n    Linear: function(p) {\r\n        return p;\r\n    },\r\n    slowIn: function(p) {\r\n        return p * p;\r\n    },\r\n    slowOut: function(p) {\r\n        return p * (2 - p);\r\n    },\r\n    slowBoth: function(p) {\r\n        if ((p /= 0.5) < 1) return 1 / 2 * p * p;\r\n        return -1 / 2 * ((--p) * (p - 2) - 1);\r\n    },\r\n    In: function(p) {\r\n        return p * p * p * p;\r\n    },\r\n    Out: function(p) {\r\n        return -((p -= 1) * p * p * p - 1);\r\n    },\r\n    Both: function(p) {\r\n        if ((p /= 0.5) < 1) return 1 / 2 * p * p * p * p;\r\n        return -1 / 2 * ((p -= 2) * p * p * p - 2);\r\n    },\r\n    fastIn: function(p) {\r\n        return p * p * p * p * p * p;\r\n    },\r\n    fastOut: function(p) {\r\n        return -((p -= 1) * p * p * p * p * p - 1);\r\n    },\r\n    fastBoth: function(p) {\r\n        if ((p /= 0.5) < 1) return 1 / 2 * p * p * p * p * p * p;\r\n        return -1 / 2 * ((p -= 2) * p * p * p * p * p - 2);\r\n    },\r\n    elasticIn: function(p) {\r\n        if (p == 0) return 0;\r\n        if (p == 1) return 1;\r\n        var x = 0.3,\r\n        //y = 1,\r\n        z = x / 4;\r\n        return -(Math.pow(2, 10 * (p -= 1)) * Math.sin((p - z) * (2 * Math.PI) / x));\r\n    },\r\n    elasticOut: function(p) {\r\n        if (p == 0) return 0;\r\n        if (p == 1) return 1;\r\n        var x = 0.3,\r\n        //y = 1,\r\n        z = x / 4;\r\n        return Math.pow(2, -10 * p) * Math.sin((p - z) * (2 * Math.PI) / x) + 1;\r\n    },\r\n    elasticBoth: function(p) {\r\n        if (p == 0) return 0;\r\n        if ((p /= 0.5) == 2) return 1;\r\n        var x = 0.3 * 1.5,\r\n        //y = 1,\r\n        z = x / 4;\r\n        if (p < 1) return -0.5 * (Math.pow(2, 10 * (p -= 1)) * Math.sin((p - z) * (2 * Math.PI) / x));\r\n        return Math.pow(2, -10 * (p -= 1)) * Math.sin((p - z) * (2 * Math.PI) / x) * 0.5 + 1;\r\n    },\r\n    backIn: function(p) {\r\n        var s = 1.70158;\r\n        return p * p * ((s + 1) * p - s);\r\n    },\r\n    backOut: function(p) {\r\n        var s = 1.70158;\r\n        return ((p = p - 1) * p * ((s + 1) * p + s) + 1);\r\n    },\r\n    backBoth: function(p) {\r\n        var s = 1.70158;\r\n        if ((p /= 0.5) < 1) return 1 / 2 * (p * p * (((s *= (1.525)) + 1) * p - s));\r\n        return 1 / 2 * ((p -= 2) * p * (((s *= (1.525)) + 1) * p + s) + 2);\r\n    },\r\n    bounceIn: function(p) {\r\n        return 1 - $Easing.bounceOut(1 - p);\r\n    },\r\n    bounceOut: function(p) {\r\n        if (p < (1 / 2.75)) {\r\n            return (7.5625 * p * p);\r\n        } else if (p < (2 / 2.75)) {\r\n            return (7.5625 * (p -= (1.5 / 2.75)) * p + 0.75);\r\n        } else if (p < (2.5 / 2.75)) {\r\n            return (7.5625 * (p -= (2.25 / 2.75)) * p + 0.9375);\r\n        }\r\n        return (7.5625 * (p -= (2.625 / 2.75)) * p + 0.984375);\r\n    },\r\n    bounceBoth: function(p) {\r\n        if (p < 0.5) return $Easing.bounceIn(p * 2) * 0.5;\r\n        return $Easing.bounceOut(p * 2 - 1) * 0.5 + 0.5;\r\n    }\r\n};","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$AnimHook":{"source":"$AnimHook = {};","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$Anim":{"source":"function $Anim(elem, attrs, options){\r\n    \r\n    var drawId;\r\n    var onstop;\r\n    play(attrs, options || {});\r\n    \r\n    return {\r\n        play: play,\r\n        stop: function(){\r\n            stop();\r\n            onstop && onstop();\r\n        }\r\n    };\r\n    \r\n    function play(attrs, options){\r\n        if(typeof options == 'number'){\r\n            options = {\r\n                dur: options\r\n            };\r\n        }\r\n        options.onbefore && options.onbefore();\r\n        onstop = options.onstop;\r\n        \r\n        var style = elem.style;\r\n        var easing = $Easing[options.easing] || $Easing.Both;\r\n        var onplay = options.onplay;\r\n        var ondone = options.ondone;\r\n        var dur = options.dur || 800;\r\n        var time0 = +new Date;\r\n        var per;\r\n        var cache_per = 0;\r\n        var attrsObj = fromatAttrs(attrs);\r\n        var attrs = attrsObj.attrs;\r\n        var from = attrsObj.from;\r\n        var by = attrsObj.by;\r\n        var fixAttrs = attrsObj.fixAttrs;\r\n        var ceil = Math.ceil;\r\n        drawId = $draw(function(){\r\n            \r\n            per = (+new Date - time0) / dur;\r\n            if(per >= 1){ //完成进度，则清除draw\r\n                per = 1;\r\n                stop();\r\n            }else{\r\n                per = ~~(easing(per) *10000)/10000; //精确保留4位小数\r\n            }\r\n            \r\n            if(cache_per != per){ //由于定时器存在精度问题，所以在下一帧中per未必发生改变\r\n                cache_per = per;\r\n                \r\n                var attr, i = 0;\r\n                while(attr = attrs[i]){\r\n                    style[attr] = ceil(from[i] + per * by[i++]) + 'px';\r\n                }\r\n                if(attr = fixAttrs.opacity){\r\n                    $opacity(elem, attr.from + per * attr.by);\r\n                }\r\n                onplay && onplay();\r\n                if(per == 1){\r\n                    ondone && ondone();\r\n                }\r\n            }\r\n            \r\n        });\r\n    }\r\n    \r\n    function fromatAttrs(attrsIn){\r\n        var attrs = [];\r\n        var from = [];\r\n        var by = [];\r\n        var fixAttrs = {};\r\n        var value; //传入参数\r\n        var fromValue; //起始位置\r\n        var byValue; //改变量\r\n        var isRelative; //是否是相对改变\r\n        \r\n        for(var attr in attrsIn){\r\n            value = attrsIn[attr];\r\n            if(typeof value != 'number'){\r\n                value = parseInt(value);\r\n            }\r\n\r\n            if(isRelative = attr.indexOf('x') == 0){\r\n                attr = attr.substr(1);\r\n                fromValue = $cssnum(elem, attr);\r\n                byValue = value;\r\n            }else{\r\n                fromValue = $cssnum(elem, attr);\r\n                byValue = value - fromValue;\r\n\r\n            }\r\n            \r\n            if(/opacity/.test(attr)){\r\n                var fromValue = $opacity(elem);\r\n                fixAttrs['opacity'] = {\r\n                    from: fromValue,\r\n                    by: isRelative ? byValue : value - fromValue\r\n                };\r\n            }else{\r\n                attrs.push(attr);\r\n                from.push(fromValue);\r\n                by.push(byValue);\r\n            }\r\n            \r\n        }\r\n        return{\r\n            attrs: attrs,\r\n            from: from,\r\n            by: by,\r\n            fixAttrs: fixAttrs\r\n        };\r\n    }\r\n\r\n    function stop(){\r\n        $draw.clear(drawId);\r\n    }\r\n\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$draw":{"source":"function $draw(fn, hook){\r\n    var list = [], //函数列表\r\n        ids = {}, //hooks\r\n        tr, //定时器句柄\r\n        fpsClick = [], //帧打点\r\n        info = { //监控数据\r\n            execTime: 0,\r\n            list: [],\r\n            fps: 0\r\n        };\r\n        \r\n    $draw = draw;\r\n    draw.clear = clear;\r\n    draw.info = getInfo;\r\n    \r\n    return draw(fn, hook);\r\n    \r\n    function draw(fn, hook){\r\n        clear(hook);\r\n        \r\n        var id = ++$guid;\r\n        ids[id] = 1;\r\n        list.push({\r\n            id: id,\r\n            fn: fn\r\n        });\r\n        if(list.length == 1){\r\n            start();\r\n        }\r\n        return id;\r\n    }\r\n    \r\n    function clear(hook){\r\n        if(ids[hook]){\r\n            delete ids[hook];\r\n            var item, i = 0;\r\n            while(item = list[i++]){\r\n                if(item.id == hook){\r\n                    list.splice(i-1, 1);\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if(list.length == 0){\r\n                stop();\r\n            }\r\n        }\r\n    }\r\n    \r\n    function start(){\r\n\r\n        function fns(){\r\n\r\n            for(var i = 0, lg = list.length; i < lg; i++){\r\n                var item = list[i]; //由于在item.fn中可能会执行clear操作，所以list[i]可能已经不存在了\r\n                item && item.fn();\r\n            }\r\n            \r\n        }\r\n        function run(){\r\n            var t0 = +new Date;\r\n            fns();\r\n            var t1 = +new Date;\r\n            \r\n            //取15ms是因为ie浏览器16ms精度问题,基本上达到60fps，差不多需要40fps+动画才能流畅\r\n            //t1 - t0 为程序执行时间，进行相应的修正\r\n            tr = setTimeout(run, Math.max(0, 15 - (t1 - t0)));                       \r\n            return;\r\n            var fpsItem, i = 0;\r\n            while(fpsItem = fpsClick[i++]){ //更新帧数\r\n                if(t1 - fpsItem < 1000){ //清除已经过期的打点\r\n                    break;\r\n                }\r\n                fpsClick.shift();\r\n            }\r\n            \r\n            fpsClick.push(t1);\r\n            info.execTime = t1 - t0;\r\n            info.fps = fpsClick.length;\r\n            info.list = list;\r\n        }\r\n        \r\n        run();\r\n    }\r\n    \r\n    function stop(){\r\n        clearTimeout(tr);\r\n    }\r\n    \r\n    function getInfo(){\r\n        return info;\r\n    }\r\n}\r\n$draw.clear = $noop;","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$DragHook":{"source":"$DragHook = {};","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$Drag":{"source":"$Drag = $Class.extend({\r\n    init: function(elem, options){\r\n        this.elem = elem;\r\n        this.time = 0;\r\n        var config = {\r\n            before: 0,//拖动前\r\n            after: 0,//拖动完成\r\n            runing: 0,//拖动中\r\n            clone: 0,//是否clone节点\r\n            lockx: 0,//锁定x方向\r\n            locky: 0,//锁定y方向\r\n            range: -1//拖动范围控制\r\n        };\r\n        \r\n        for(var ex in config){\r\n            this['_'+ ex] = (ex in options ? options : config)[ex];\r\n        }\r\n\r\n        this.addHand(options.hand || elem);\r\n        \r\n    },\r\n    \r\n    addHand: function(hand){\r\n        $bind(hand, 'mousedown', this._beforeDrag, this);\r\n    },\r\n    \r\n    rmvHand: function(hand){\r\n        $bind(hand, 'mousedown', this._beforeDrag, this);\r\n    },\r\n    _init: function(evt){\r\n        this._hasInit = 1;\r\n        var elem = this.elem, box = elem,\r\n            offset = $offset(elem),\r\n            marginLeft = $cssnum(elem, 'marginLeft'),\r\n            marginTop = $cssnum(elem, 'marginTop');\r\n        \r\n        if(this._clone){\r\n            var clone = $clone(elem, true);\r\n            $css(clone, {\r\n                position: 'absolute',\r\n                zIndex: 9999,\r\n                left: offset.left - marginLeft,\r\n                top: offset.top - marginTop,\r\n                width: $cssnum(elem, 'width'),\r\n                height: $cssnum(elem, 'height')\r\n            });\r\n            $append($doc.body, clone);\r\n            box = this._clone = clone;\r\n        }\r\n        this._style = box.style;\r\n        \r\n        this._offsetX = evt.clientX - box.offsetLeft + marginLeft;\r\n        this._offsetY = evt.clientY - box.offsetTop + marginTop;\r\n        this._before && this._before.call(this, evt);\r\n        if(this._range == -1){//限制在窗口内\r\n            this._minX = 0;\r\n            this._minY = 0;\r\n            this._maxX = $de.clientWidth - box.offsetWidth - marginLeft - $cssnum(box, 'marginRight');\r\n            this._maxY = $de.clientHeight - box.offsetHeight - marginTop - $cssnum(box, 'marginBottom');\r\n        }else if(this._range){\r\n            var range = $query(this._range),\r\n                ro = $offset(range),\r\n                rw = range.offsetWidth,\r\n                rh = range.offsetHeight,\r\n                bl = $cssnum(range, 'borderLeftWidth'),\r\n                br = $cssnum(range, 'borderRightWidth'),\r\n                bt = $cssnum(range, 'borderTopWidth'),\r\n                bb = $cssnum(range, 'borderBottomWidth');\r\n            this._minX = ro.left + bl;\r\n            this._minY = ro.top + bt;\r\n            this._maxX = ro.left + rw - br - box.offsetWidth - marginLeft - $cssnum(box, 'marginRight');\r\n            this._maxY = ro.top + rh - bb - box.offsetHeight - marginTop- $cssnum(box, 'marginBottom');\r\n            \r\n            \r\n        }\r\n        \r\n    },\r\n    \r\n    _beforeDrag: function(evt){\r\n        if(evt.mouseKey != 'L' || (this._lockx && this._locky)){\r\n            return;\r\n        }\r\n        \r\n        evt.stopPropagation();\r\n        evt.preventDefault();\r\n        this._hasInit = 0;\r\n        \r\n        if($browser.ie){\r\n            this._focusHand = evt.target;\r\n            $bind(this._focusHand, 'losecapture', this._drop, this);\r\n            this._focusHand.setCapture(false);\r\n        }else{\r\n            $bind($win, 'blur', this._drop, this);\r\n        }\r\n        \r\n        $bind($doc, 'mousemove', this._draging, this);\r\n        $bind($doc, 'mouseup', this._drop, this);\r\n    },\r\n    \r\n    _draging: function(evt){\r\n        \r\n        ///*进行过滤\r\n        var now = +new Date;\r\n        if(now - this.time > 15){\r\n            this.time = now;\r\n        }else{\r\n            return;\r\n        }\r\n        //*/\r\n\r\n        $win.getSelection ? $win.getSelection().removeAllRanges() : $doc.selection.empty();\r\n        !this._hasInit && this._init(evt);\r\n        \r\n        var left = evt.clientX - this._offsetX,\r\n            top = evt.clientY - this._offsetY;\r\n        if(this._range){\r\n\r\n            left = Math.max(this._minX, Math.min(left, this._maxX));\r\n            top = Math.max(this._minY, Math.min(top, this._maxY));\r\n        }\r\n        \r\n        !this._lockx && (this._style.left = left +'px');\r\n        !this._locky && (this._style.top = top +'px');\r\n        this._runing && this._runing.call(this, evt);\r\n    },\r\n    _drop:function(evt){\r\n        $unbind($doc, 'mousemove', this._draging, this);\r\n        $unbind($doc, 'mouseup', this._drop, this);\r\n        \r\n        if($browser.ie){\r\n            $unbind(this._focusHand, 'losecapture', this._drop, this);\r\n            this._focusHand.releaseCapture();\r\n        }else{\r\n            $unbind($win, 'blur', this._drop, this);\r\n        }\r\n        if(this._hasInit){\r\n            this._after && this._after.call(this, evt);\r\n            if(this._clone && this._clone.parentNode){\r\n                $remove(this._clone);\r\n            }\r\n        }\r\n    },\r\n    set: function(options){\r\n        for(var e in options){\r\n            this[e] = options[e];\r\n        }  \r\n    },\r\n    lock: function(){\r\n        this._lockx = true;\r\n        this._locky = true;\r\n    },\r\n    unlock: function(){\r\n        this._lockx = false;\r\n        this._locky = false;\r\n    }\r\n    \r\n\r\n});","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$anim":{"source":"function $anim(elem, cssAttr, callback){\r\n    \r\n    var \r\n    property,\r\n    cssAttrCache = {};\r\n    \r\n    for(property in cssAttr){\r\n        cssAttrCache[property] = $cssnum(elem, property);\r\n    }\r\n    if(cssAttr.opacity > -1){\r\n        cssAttr.opacity = Math.round(cssAttr.opacity * 100);\r\n        cssAttrCache.opacity = Math.round(cssAttrCache.opacity * 100);\r\n    }\r\n    clearInterval(elem._animTimer_);\r\n    elem._animTimer_ = setInterval(function(){\r\n        var\r\n        complete = 1,\r\n        property,\r\n        speed;\r\n        for(property in cssAttr){\r\n            if(cssAttr[property] != cssAttrCache[property]){\r\n                complete = 0;\r\n                speed = (cssAttr[property] - cssAttrCache[property]) / 8;\r\n                cssAttrCache[property] += speed > 0 ? Math.ceil(speed) : Math.floor(speed);\r\n                $css(elem, property, property == 'opacity' ? cssAttrCache[property] / 100 : cssAttrCache[property]);\r\n            }\r\n        }\r\n        if(complete){\r\n            clearInterval(elem._animTimer_);\r\n            callback && callback();\r\n        }\r\n    }, 15);\r\n    \r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$z":{"source":"function $z(expression, context){\r\n	\r\n    switch(typeof expression){\r\n		\r\n        case 'function':\r\n            return $ready(expression);\r\n			\r\n        case 'string':\r\n		\r\n            if(expression.indexOf('<') == 0){ //创建DOM节点\r\n                return $z($element(expression));\r\n            }\r\n			\r\n            return $z($query(expression, context));\r\n			\r\n        case 'object':   \r\n		\r\n            if(!expression){\r\n                return null;\r\n            }\r\n			\r\n            if($iszelement(expression)){\r\n                return expression;\r\n            }\r\n			\r\n            return new $zelement(expression);\r\n			\r\n    }\r\n	\r\n    return null;\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$zelement":{"source":"function $zelement(input){\r\n    //imports $p\r\n    if($isarray(input)){\r\n        this.es = input;\r\n        this.e = input[0];\r\n    }else{\r\n        this.e = input;\r\n    }\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$iszelement":{"source":"function $iszelement(input){\r\n    return input && input.constructor == $zelement;\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$iselement":{"source":"function $iselement(input){\r\n    return input && (input.nodeType === 1 || input == $doc);\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$element":{"source":"function $element(input){\r\n	\r\n    if($iselement(input))return input;\r\n	\r\n    if($iszelement(input))return input.e;\r\n    \r\n    if(~input.indexOf('<')){ //根据<标识符判断\r\n	\r\n        var div = $doc.createElement('div');\r\n        div.innerHTML = $tirm(input);\r\n        return div.firstChild;\r\n		\r\n    }else{\r\n        return $doc.createElement(input);\r\n    }\r\n	\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$eachcall":{"source":"function $eachcall(which, method){ //批量调用\r\n\r\n    var args = [].slice.call(arguments, 2);\r\n	\r\n    if(which.es){\r\n		\r\n        $each(which.es, function(e){\r\n            method.apply($z(e), [e].concat(args));\r\n        });\r\n		\r\n    }else{\r\n		\r\n        method.apply(which, [which.e].concat(args));\r\n		\r\n    }\r\n	\r\n    return which;\r\n	\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}},"$call":{"source":"function $call(which, method){\r\n    var args = [].slice.call(arguments, 2);\r\n    return method.apply(which, [which.e].concat(args));\r\n}","imports":{"$doc":1,"$browser":1,"$eventhook":1,"$guid":1,"$addevent":1,"$event":1,"$iszelement":1,"$element":1,"$isarray":1,"$each":1,"$query":1,"$hasclass":1,"$attr":1,"$de":1,"$win":1,"$rmvpx":1,"$css":1,"$cssnum":1,"$opacity":1,"$fixStyleName":1,"$zelement":1,"$append":1,"$style":1,"$cls":1,"$tag":1,"$width":1,"$XHR":1,"$ajax":1,"$param":1,"$head":1,"$tirm":1,"$Easing":1,"$draw":1,"$noop":1,"$Class":1,"$bind":1,"$offset":1,"$clone":1,"$unbind":1,"$remove":1,"$ready":1,"$p":1,"$iselement":1,"$z":1}}};
$API = {"bom":{"browser_s":"$browser","isie6_s":"$isie6","cookie_s":"$cookie"},"dom":{"attr":{"attr_p":"function(name, value){\r\n    return $call(this, $attr, name, value);\r\n}","tag_p":"function(nodename){\r\n    return $call(this, $tag, nodename);\r\n}","val_p":"function(value){\r\n    return $call(this, $val, value);\r\n}","html_p":"function(html){\r\n    return $call(this, $html, html);	\r\n}"},"event":{"ready_s":"function(fn){\r\n    $ready(fn);\r\n}","on_p":"function(type, fn, context){\r\n    return $eachcall(this, $bind, type, fn, context);\r\n}","un_p":"function(type, fn, context){\r\n    return $eachcall(this, $unbind, type, fn, context);\r\n}","click_p":"function(fn, context){\r\n    return $eachcall(this, $bind, 'click', fn, context);\r\n}"},"operate":{"E_s":"function(html){\r\n    return $z($element(html));\r\n}","append_p":"function(element, index){\r\n    return $call(this, $append, element, index);\r\n}","insertBefore_p":"function(element){\r\n    return $call(this, $insert, element, false);\r\n}","insertAfter_p":"function(element){\r\n    return $call(this, $insert, element, true);\r\n}","remove_p":"function(){\r\n    return $z($remove(this.e));\r\n}","clone_p":"function(deepCopy){\r\n    return $z($clone(this.e, deepCopy));\r\n}","replace_p":"function(element){\r\n    return $z($replace(this.e, element));\r\n}"},"query":{"q_s":"function(){\r\n    return $query.apply(null, arguments);\r\n}","eq_p":"function(i){\r\n    return $z(this.es[i < 0 ? this.es.length + i : i]);\r\n}","find_p":"function(expression){\r\n    return $z(expression, this.e);\r\n}","parent_p":"function(expression){\r\n    return $z($parent(this.e, expression));\r\n}","child_p":"function(n){\r\n    return $z($child(this.e, n));\r\n}","prev_p":"function(){\r\n    return $z($prev(this.e));\r\n}","next_p":"function(){\r\n    return $z($next(this.e));\r\n}","filter_p":"function(fn){\r\n    if(this.es){\r\n        var es = [];\r\n        $each(this.es, function(e, i){\r\n            var Ze = $z(e);\r\n            if(fn.call(Ze, Ze, i)){\r\n                es.push(e);\r\n            }\r\n        });\r\n        if(es.length){\r\n            return $z(es);\r\n        }\r\n        return null;\r\n    }else{\r\n        if(!fn.call(this, this, 0)){\r\n            return null;\r\n        }\r\n        return $z(this.e);\r\n    }\r\n}"},"style":{"cls_p":"function(cls1, cls2){\r\n    return $call(this, $cls, cls1, cls2);\r\n}","css_p":"function(name, value){\r\n    return $call(this, $css, name, value);\r\n}","px_p":"function(name){\r\n    return $cssnum(this.e, name);\r\n}","left_p":"function(value){\r\n    return $call(this, $left, value);\r\n}","top_p":"function(value){\r\n    return $call(this, $top, value);\r\n}","width_p":"function(value){\r\n    return $call(this, $width, value);\r\n}","height_p":"function(value){\r\n    return $call(this, $height, value);\r\n}","offsetLeft_p":"function(){\r\n    return $offset(this.e).left;\r\n}","offsetTop_p":"function(){\r\n    return $offset(this.e).top;\r\n}","offsetWidth_p":"function(){\r\n    return this.e.offsetWidth;\r\n}","offsetHeight_p":"function(){\r\n    return this.e.offsetHeight;\r\n}","opacity_p":"function(opacity){\r\n    return $call(this, $opacity, opacity);\r\n}","show_p":"function(){\r\n    return $call(this, $show);\r\n}","hide_p":"function(){\r\n    return $call(this, $hide);\r\n}"},"util":{"each_p":"function(fn){\r\n    $each(this.es, function(e, i){\r\n        fn.call($z(e), i);\r\n    });\r\n    return this;\r\n}","contains_p":"function(element){\r\n    return $contains(this.e, element);\r\n}"}},"object":{"forEach_s":"$each","param_s":"$param","mix_s":"$mix","toJson_s":"function(obj){\r\n    if($win.JSON && JSON.stringify){\r\n        return JSON.stringify(obj);\r\n    }\r\n    return $tojson(obj);\r\n}"},"other":{"version_s":"'0.12'","isArray_s":"$isarray","Class_s":"function(prop, source){\r\n    return $Class.extend(prop, source);\r\n}","extend_s":"function(name, method){\r\n    var type = typeof name;\r\n    if(type == 'string'){\r\n        $p[name] = method;\r\n    }else if(type == 'object'){\r\n        $each(name, function(method, name){\r\n            $p[name] = method;\r\n        });\r\n    }\r\n}"},"request":{"ajax_s":"$ajax","post_s":"$post","get_s":"$get","img_s":"$img","js_s":"$js","style_s":"$style"},"string":{"tirm_s":"$tirm","parseJson_s":"function(str){\r\n    if($win.JSON && JSON.parse){\r\n        return JSON.parse(str);\r\n    }\r\n    return $parsejson(str);\r\n}","encodeURL_s":"$encodeurl","encodeHTML_s":"$encodehtml","decodeHTML_s":"$decodehtml","rstr_s":"$rstr"},"widget":{"scrollTop_s":"$scrollTop","anim_p":"function(attrs, option){\r\n    $each(this.es || [this.e], function(elem, i){\r\n        var animId = elem.__ANIMID__;\r\n        if(!animId){\r\n            animId = elem.__ANIMID__ = ++$guid\r\n        }else{\r\n            $AnimHook[animId].stop();\r\n        }\r\n        $AnimHook[animId] = $Anim(elem, attrs, option);\r\n    });\r\n    return this;\r\n}","drag_p":"function(option){\r\n    if(!this.e.__DRAGID__){\r\n        $DragHook[this.e.__DRAGID__ = ++$guid] = $Drag(this.e, option || {});\r\n    }\r\n    return $DragHook[this.e.__DRAGID__];\r\n}","easyAnim_s":"function(cssAttr, callback){\r\n    $anim(this.e, cssAttr, callback);\r\n}","log_s":"$log"}};
$DOC = {"bom":{"name":"浏览器","items":[{"name":"browser","isprototype":false,"syntaxs":[{"args":null,"desc":"获取浏览器的版本号"}],"mores":[{"title":"支持的浏览器","table":[["浏览器"],["ie"],["firefox"],["chrome"],["opera"],["safari"]]},{"title":"使用说明","texts":"e.g. IE6下 Z.browser => {ie:\"6.0\"}；firefox38下 Z.browser => {firefox:\"38.0\"}"}],"ret":{"desc":"{浏览器名称:浏览器版本号}形式的Hash对象","type":"Hash"}},{"name":"isie6","isprototype":false,"syntaxs":[{"args":null,"desc":"判断是否为ie6浏览器"}],"ret":{"desc":"判断结果","type":"Boolean"}},{"name":"cookie( )","isprototype":false,"syntaxs":[{"args":["key"],"desc":"获取cookie的值"},{"args":["key","value","option"],"desc":"设置cookie的值，当value为null时，则删除对应的cookie"},{"args":["data","option"],"desc":"批量设置cookie的值"}],"params":[{"name":"key","type":"String","desc":"cookie的名称","need":true},{"name":"value","type":"String","desc":"cookie的新值","need":true},{"name":"data","type":"Hash","desc":"一组cookie的新值","need":true},{"name":"option","type":"Hash","desc":"设置cookie的有效期等其他属性","need":false}],"mores":[{"title":"option说明","table":[["字段","说明"],["expires","cookie有效期，默认值是直到浏览器关闭时失效，单位是分钟"],["path","cookie的路径范围，默认是根目录"],["domain","cookie的domain权限，默认是当前domain"]]}],"ret":{"desc":"cookie的值","type":"String,Null"}}]},"dom":{"name":"DOM操作","attr":{"name":"属性","items":[{"name":"attr( )","isprototype":true,"syntaxs":[{"args":["key"],"desc":"获取属性值"},{"args":["key","value"],"desc":"设置属性值"},{"args":["data"],"desc":"批量设置属性值"}],"params":[{"name":"key","type":"String","desc":"属性名","need":true},{"name":"value","type":"String","desc":"属性值，当value为null则移除属性","need":true},{"name":"data","type":"Hash","desc":"一组属性键值","need":true}],"ret":{"desc":"属性值，当前Z对象本身","type":"Z,String,Undefined"}},{"name":"tag( )","isprototype":true,"syntaxs":[{"args":null,"desc":"获取节点名"},{"args":["nodename"],"desc":"判断节点名是否是nodename"}],"params":[{"name":"nodename","type":"String","desc":"用于判断的节点名","need":true}],"ret":{"desc":"节点名，判断结果","type":"String,Boolean"}},{"name":"val( )","isprototype":true,"syntaxs":[{"args":null,"desc":"获取表单值"},{"args":["value"],"desc":"设置表单值"}],"params":[{"name":"value","type":"String","desc":"新的表单值","need":true}],"ret":{"desc":"表单值，当前Z对象本身","type":"Z,String"}},{"name":"html( )","isprototype":true,"syntaxs":[{"args":null,"desc":"获取节点的innerHTML"},{"args":["htmlstr"],"desc":"设置节点的innerHTML"}],"params":[{"name":"htmlstr","type":"String","desc":"html字符串，需要唯一的根节点","need":true}],"ret":{"desc":"html字符串，当前Z对象本身","type":"Z,String"}}]},"event":{"name":"事件","items":[{"name":"event","isprototype":false,"syntaxs":[{"args":null,"desc":"格式化后的事件对象，事件回调函数的第一个参数"}],"mores":[{"title":"事件API列表","table":[["名称","类型","描述"],["original","Object","未经处理的原始Event对象"],["type","String","Event事件的类型，例如click，mouseover等"],["clientX","Number","鼠标的坐标位置"],["clientY","Number","鼠标的坐标位置"],["target","Element","事件发生的节点"],["fromTarget","Element","鼠标事件的来源节点"],["toTarget","Element","鼠标事件的目标节点"],["stopPropagation","Function","阻止冒泡"],["preventDefault","Function","阻止默认事件"],["mouseKey","String","鼠标的点击键返回 左键（L）,中键（M）,右键（R）"],["keyCode","Number","键盘的按下的键"]]}],"ret":{"desc":"格式化后的event","type":"Event"}},{"name":"ready( )","isprototype":false,"syntaxs":[{"args":["fn"],"desc":"让函数在DOM就绪后执行"}],"params":[{"name":"fn","type":"Function","desc":"传入的函数","need":true}]},{"name":"on( )","isprototype":true,"syntaxs":[{"args":["type","callback","context"],"desc":"添加事件绑定"}],"params":[{"name":"type","type":"String","desc":"事件类型","need":true},{"name":"callback","type":"Function","desc":"回调函数","need":true},{"name":"context","type":"Any","desc":"回调函数中this的指向,默认指向当前元素","need":false}],"ret":{"desc":"Z对象本事","type":"Z"}},{"name":"un( )","isprototype":true,"syntaxs":[{"args":["type","callback","context"],"desc":"移除事件绑定"}],"params":[{"name":"type","type":"String","desc":"事件类型","need":true},{"name":"callback","type":"Function","desc":"回调函数","need":true},{"name":"context","type":"Any","desc":"回调函数中this的指向,默认指向当前ZElement","need":false}],"ret":{"desc":"Z对象本事","type":"Z"}},{"name":"click( )","isprototype":true,"syntaxs":[{"args":["callback","context"],"desc":"鼠标点击事件绑定"}],"params":[{"name":"callback","type":"Function","desc":"回调函数","need":true},{"name":"context","type":"Any","desc":"回调函数中this的指向,默认指向当前元素","need":false}],"ret":{"desc":"Z对象本事","type":"Z"}}]},"operate":{"name":"操作","items":[{"name":"E( )","isprototype":false,"syntaxs":[{"args":["tagname"],"desc":"创建一个zelement"},{"args":["htmlstr"],"desc":"创建一个zelement"}],"params":[{"name":"tagname","type":"String","desc":"根据节点名称创建节点","need":true},{"name":"htmlstr","type":"String","desc":"根据html字符串创建节点，必须有唯一根节点","need":true}],"ret":{"desc":"Z对象","type":"Z"}},{"name":"append( )","isprototype":true,"syntaxs":[{"args":["element","index"],"desc":"添加子节点"},{"args":["htmlstr","index"],"desc":"添加子节点"}],"params":[{"name":"element","type":"Z,Element","desc":"待添加的节点","need":true},{"name":"htmlstr","type":"String","desc":"待添加的html字符串","need":true},{"name":"index","type":"Integer","desc":"子元素插入的位置，默认为-1，即添加到最后，取值可以是正数或者负数，正数超出则添加到尾部，负数超出则添加到头部","need":true}],"ret":{"desc":"Z对象","type":"Z"}},{"name":"insertBefore( )","isprototype":true,"syntaxs":[{"args":["element"],"desc":"在节点前插入兄弟元素"},{"args":["htmlstr"],"desc":"在节点前插入兄弟元素"}],"params":[{"name":"element","type":"Z,Element","desc":"待添加的节点","need":true},{"name":"htmlstr","type":"String","desc":"待添加的html字符串","need":true}],"ret":{"desc":"Z对象","type":"Z"}},{"name":"insertAfter( )","isprototype":true,"syntaxs":[{"args":["element"],"desc":"在第一个元素后插入兄弟元素"},{"args":["htmlstr"],"desc":"在第一个元素后插入兄弟元素"}],"params":[{"name":"element","type":"Z,Element","desc":"待添加的节点","need":true},{"name":"htmlstr","type":"String","desc":"待添加的html字符串","need":true}],"ret":{"desc":"Z对象","type":"Z"}},{"name":"remove( )","isprototype":true,"syntaxs":[{"args":null,"desc":"删除第一个元素并返回"}],"ret":{"desc":"被删除的z对象","type":"Z"}},{"name":"clone( )","isprototype":true,"syntaxs":[{"args":["deepcopy"],"desc":"克隆元素并返回"}],"params":[{"name":"deepcopy","type":"Boolean","desc":"是否深度克隆，缺省为false","need":false}],"ret":{"desc":"新克隆的z对象","type":"Z"}},{"name":"replace( )","isprototype":true,"syntaxs":[{"args":["element"],"desc":"替换第一个元素并返回"},{"args":["htmlstr"],"desc":"替换第一个元素并返回"}],"params":[{"name":"element","type":"Z,Element","desc":"待添加的节点","need":true},{"name":"htmlstr","type":"String","desc":"待添加的html字符串","need":true}],"ret":{"desc":"被替换的z对象","type":"Z"}}]},"query":{"name":"查询","items":[{"name":"expression","isprototype":false,"syntaxs":[{"args":null,"desc":"选择器表达式"}],"mores":[{"title":"表达式说明","table":[["表达式","说明"],["#id","id选择器"],["tag","标签选择器"],[".cls","类名选择器"],["[key=val]","属性选择器"],["#id tag.cls[key=val]","tag，cls，attr可以同时存在"]]},{"title":"简单的选择器","texts":"极简模式的选择器，规避复杂的DOM结构，便于维护"}]},{"name":"q( )","isprototype":false,"syntaxs":[{"args":["expression","context"],"desc":"dom选择器，返回原始节点元素"}],"params":[{"name":"expression","type":"String","desc":"选择器表达式","need":true},{"name":"context","type":"Element","desc":"查询作用域","need":false}],"ret":{"desc":"查询结果","type":"Element,Elements,Null"}},{"name":"eq( )","isprototype":true,"syntaxs":[{"args":["index"],"desc":"返回查询结果中对应位置的元素"}],"params":[{"name":"index","type":"Integer","desc":"index从0开始，当n<0时则从后往前取","need":true}],"ret":{"desc":"查询结果","type":"Z,Null"}},{"name":"find( )","isprototype":true,"syntaxs":[{"args":["expression"],"desc":"在当前范围下进行查找"}],"params":[{"name":"expression","type":"String","desc":"选择器表达式","need":true}],"ret":{"desc":"查询结果","type":"Z,Null"}},{"name":"parent( )","isprototype":true,"syntaxs":[{"args":null,"desc":"返回祖先元素"},{"args":["expression|n"],"desc":"查询祖先元素"},{"args":["index"],"desc":"查询第index+1层祖先元素"}],"params":[{"name":"expression","type":"String","desc":"符合选择器最近匹配的祖先元素","need":true},{"name":"index","type":"Integer","desc":"返回位于第index+1层的祖先元素","need":true}],"ret":{"desc":"查询结果","type":"Z,Mull"}},{"name":"child( )","isprototype":true,"syntaxs":[{"args":null,"desc":"返回全部子元素"},{"args":["index"],"desc":"返回对应子元素"}],"params":[{"name":"index","type":"Integer","desc":"index从0开始，当n<0时则从后往前取","need":true}],"ret":{"desc":"查询结果","type":"Z,Null"}},{"name":"prev( )","isprototype":true,"syntaxs":[{"args":null,"desc":"返回前相邻的兄弟元素"}],"ret":{"desc":"查询结果","type":"Z,Null"}},{"name":"next( )","isprototype":true,"syntaxs":[{"args":null,"desc":"返回后相邻的兄弟节点"}],"ret":{"desc":"查询结果","type":"Z,Null"}},{"name":"filter( )","isprototype":true,"syntaxs":[{"args":["fn"],"desc":"筛选查询结果"}],"params":[{"name":"fn","type":"Function","desc":"过滤函数，参数(zelement: 待过滤的数据，interger：元素索引)，过滤函数返回false则过滤当前项","need":true}],"ret":{"desc":"查询结果","type":"Z,Null"}}]},"style":{"name":"样式","items":[{"name":"cls( )","isprototype":true,"syntaxs":[{"args":null,"desc":"获取className"},{"args":["cls1"],"desc":"判断是否包含className"},{"args":["cls1","cls2"],"desc":"替换cls1为cls2"},{"args":["expression"],"desc":"操作className"}],"params":[{"name":"cls1","type":"String","desc":"判断节点中是否含有cls1","need":true},{"name":"cls2","type":"String","desc":"用于替换的className","need":true},{"name":"expression","type":"String","desc":"第一个字符是+，-，~，=时表示操作className；+代表添加，-代表移除，~代表切换，=代表覆盖，多个cls用逗号隔开","need":true}],"ret":{"desc":"样式名，判断结果，Z对象本身","type":"String,Boolean,Z"}},{"name":"css( )","isprototype":true,"syntaxs":[{"args":["name"],"desc":"获取样式"},{"args":["name","value"],"desc":"设置样式"},{"args":["csstext"],"desc":"批量设置样式"},{"args":["data"],"desc":"批量设置样式"}],"params":[{"name":"name","type":"String","desc":"获取样式名称为name的属性值","need":true},{"name":"value","type":"String","desc":"设置样式，value为值，可以使用中划线也可以采用驼峰","need":true},{"name":"csstext","type":"String","desc":"设置css，标准的csstext字符串，比如margin-left:12px;color:red;","need":true},{"name":"data","type":"Hash","desc":"批量设置css，key作为样式名，value作为样式值","need":true}],"ret":{"desc":"样式值，Z对象","type":"String,Z"}},{"name":"px( )","isprototype":true,"syntaxs":[{"args":["name"],"desc":"获取节点可计算的px值"}],"params":[{"name":"name","type":"String","desc":"取值可以是:[left,top,width,height,border,padding,margin]等相关属性","need":true}],"ret":{"desc":"对应属性的像素值","type":"Number"}},{"name":"left( )","isprototype":true,"syntaxs":[{"args":null,"desc":"获取style.left的数值"},{"args":["value"],"desc":"设置style.left"}],"params":[{"name":"value","type":"Integer","desc":"left的值","need":true}],"ret":{"desc":"返回结果","type":"Integer,Z"}},{"name":"top( )","isprototype":true,"syntaxs":[{"args":null,"desc":"类似left"}]},{"name":"width( )","isprototype":true,"syntaxs":[{"args":null,"desc":"类似left"}]},{"name":"height( )","isprototype":true,"syntaxs":[{"args":null,"desc":"类似left"}]},{"name":"offsetLeft( )","isprototype":true,"syntaxs":[{"args":null,"desc":"获取节点离开文档左侧的距离，单位px"}],"ret":{"desc":"左侧偏移","type":"Number"}},{"name":"offsetTop( )","isprototype":true,"syntaxs":[{"args":null,"desc":"同offsetLeft"}]},{"name":"offsetWidth( )","isprototype":true,"syntaxs":[{"args":null,"desc":"同offsetLeft"}]},{"name":"offsetHeight( )","isprototype":true,"syntaxs":[{"args":null,"desc":"同offsetLeft"}]},{"name":"opacity( )","isprototype":true,"syntaxs":[{"args":null,"desc":"获取透明度"},{"args":["opacity"],"desc":"设置透明度"}],"params":[{"name":"opacity","type":"Number","desc":"设置节点的透明度，取值0-1","need":true}],"ret":{"desc":"返回结果","type":"Number,Z"}},{"name":"show( )","isprototype":true,"syntaxs":[{"args":null,"desc":"清除样式none属性"}],"ret":{"desc":"返回自身","type":"Z"}},{"name":"hide( )","isprototype":true,"syntaxs":[{"args":null,"desc":"设置样式none属性"}],"ret":{"desc":"返回自身","type":"Z"}}]},"util":{"name":"工具","items":[{"name":"each( )","isprototype":true,"syntaxs":[{"args":["callback"],"desc":"遍历执行callback"}],"params":[{"name":"callback","type":"Function","desc":"回调函数，参数(i:下标)，this指向ZElement","need":true}],"mores":[{"title":"跳出遍历条件","texts":"设置回调函数返回为true"}],"ret":{"desc":"当前Z对象本身","type":"Z"}},{"name":"contains( )","isprototype":true,"syntaxs":[{"args":["element"],"desc":"判断当前节点是否包含element"}],"params":[{"name":"element","type":"Z,Element","desc":"待判断的节点对象","need":true}],"ret":{"desc":"等于当前节点返回1，被包含则返回2，否则返回0","type":"Integer"}}]}},"object":{"name":"对象操作","items":[{"name":"forEach( )","isprototype":false,"syntaxs":[{"args":["data","callback"],"desc":"遍历对象或数组并且执行回调"}],"params":[{"name":"data","type":"Object,Array","desc":"待操作的数据","need":true},{"name":"callback","type":"Function","desc":"回调函数","need":true}],"mores":[{"title":"回调函数callback(value, key)","texts":"当回调函数返回true时将跳出遍历"}]},{"name":"param( )","isprototype":false,"syntaxs":[{"args":["data"],"desc":"序列化对象为URL查询字符串，会对值进行encodeURIComponent编码"}],"params":[{"name":"data","type":"Hash","desc":"待序列化的数据，{k1:v1,k2:v2}=>k1=v1&k2=v2","need":true}],"ret":{"desc":"URL查询字符串","type":"String"}},{"name":"mix( )","isprototype":false,"syntaxs":[{"args":["target","source"],"desc":"遍历来源数据并到目标数据上"}],"params":[{"name":"target","type":"Object","desc":"目标数据","need":true},{"name":"source","type":"Object","desc":"来源数据","need":true}]},{"name":"toJson( )","isprototype":false,"syntaxs":[{"args":["obj"],"desc":"对象转换成json字符串"}],"params":[{"name":"obj","type":"Object","desc":"待转换的对象","need":true}],"ret":{"desc":"JSON字符串","type":"String"}}]},"other":{"name":"常用方法","items":[{"name":"version","isprototype":false,"syntaxs":[{"args":null,"desc":"返回版本"}],"ret":{"desc":"返回版本信息字符串","type":"String"}},{"name":"isArray( )","isprototype":false,"syntaxs":[{"args":["obj"],"desc":"判断是否为数组"}],"params":[{"name":"obj","type":"Any","desc":"待判断的变量","need":true}],"ret":{"desc":"返回判断结果","type":"Boolean"}},{"name":"Class( )","isprototype":false,"syntaxs":[{"args":["prototype","static"],"desc":"创建类对象"}],"params":[{"name":"prototype","type":"Object","desc":"原型API","need":true},{"name":"static","type":"Object","desc":"静态API","need":true}],"ret":{"desc":"返回类","type":"Class"}},{"name":"extend( )","isprototype":false,"syntaxs":[{"args":["prototype"],"desc":"扩展Z对象原型"},{"args":["name","method"],"desc":"扩展Z对象原型"}],"params":[{"name":"prototype","type":"Object","desc":"原型API","need":true},{"name":"name","type":"String","desc":"接口名称","need":true},{"name":"method","type":"Function","desc":"接口实现","need":true}],"ret":{"desc":"无","type":"Null"}}]},"request":{"name":"资源请求","items":[{"name":"ajax( )","isprototype":false,"syntaxs":[{"args":["option"],"desc":"创建一个功能丰富的ajax，比get和post更多配置项"}],"params":[{"name":"option","type":"Hash","desc":"配置参数","need":true}],"mores":[{"title":"option配置说明","table":[["key","描述"],["url","请求地址"],["type","请求类型，get或post"],["data","发送的数据，缺省null"],["callback","回调函数，函数的参数由responseType决定，默认是xhr对象"],["responseType","响应的类型，决定callback的参数类型"],["headers","设置请求头"]]}]},{"name":"post( )","isprototype":false,"syntaxs":[{"args":["url","callback","data"],"desc":"调用ajax的post请求"}],"params":[{"name":"url","type":"String","desc":"url地址","need":true},{"name":"callback","type":"Function","desc":"回调函数","need":true},{"name":"data","type":"Hash,String","desc":"json对象或者URL查询字符串","need":true}]},{"name":"get( )","isprototype":false,"syntaxs":[{"args":["url","callback","data"],"desc":"同ajax的post"}]},{"name":"img( )","isprototype":false,"syntaxs":[{"args":["url","callback"],"desc":"动态加载img并执行回调"}],"params":[{"name":"url","type":"String","desc":"img的url地址","need":true},{"name":"callback","type":"Function","desc":"图片加载完成时的回调函数，参数(img: 指向图片对象)","need":false}]},{"name":"js( )","isprototype":false,"syntaxs":[{"args":["url","callback","data","charset"],"desc":"动态加载js，使用可发起jsonp"}],"params":[{"name":"url","type":"String","desc":"js文件的地址","need":true},{"name":"callback","type":"Function","desc":"回调函数","need":true},{"name":"data","type":"Hash,String","desc":"json对象或者URL查询字符串","need":true},{"name":"charset","type":"String","desc":"返回内容使用的编码","need":true}]},{"name":"style( )","isprototype":false,"syntaxs":[{"args":["url"],"desc":"加载css文件"},{"args":["csstext"],"desc":"加载css样式"}],"params":[{"name":"url","type":"String","desc":"css文件的地址","need":true},{"name":"csstext","type":"String","desc":"标准的csstext","need":true}]}]},"string":{"name":"字符串","items":[{"name":"tirm( )","isprototype":false,"syntaxs":[{"args":["str"],"desc":"去除首尾空格"}],"params":[{"name":"str","type":"String","desc":"待处理的字符串","need":true}],"ret":{"desc":"结果字符串","type":"String"}},{"name":"parseJson( )","isprototype":false,"syntaxs":[{"args":["str"],"desc":"解析json字符串到对象"}],"params":[{"name":"str","type":"String","desc":"Json字符串","need":true}],"ret":{"desc":"JSON对象","type":"Object,Null"}},{"name":"encodeURL( )","isprototype":false,"syntaxs":[{"args":["str"],"desc":"编码特殊字符以便进行传输"}],"params":[{"name":"str","type":"String","desc":"待编码的字符串","need":true}],"mores":[{"title":"可编码字符","table":[["原始字符","编码字符"],["%","%25"],["空格","%20"],["#","%23"],["&","%26"],["=","%3D"],["/","%2F"],["?","%3F"],["+","%2B"]]}],"ret":{"desc":"编码后的字符串","type":"String"}},{"name":"encodeHTML( )","isprototype":false,"syntaxs":[{"args":["htmlstr"],"desc":"编码html字符串，<=&amp;lt;，&=>&amp;amp;等"}],"params":[{"name":"htmlstr","type":"String","desc":"html字符串","need":true}],"ret":{"desc":"结果","type":"String"}},{"name":"decodeHTML( )","isprototype":false,"syntaxs":[{"args":["htmlstr"],"desc":"解码html字符串"}],"params":[{"name":"htmlstr","type":"String","desc":"html字符串","need":true}],"ret":{"desc":"结果","type":"String"}},{"name":"rstr( )","isprototype":false,"syntaxs":[{"args":["input","data"],"desc":"解析字符串，用data数据代替"}],"params":[{"name":"input","type":"String|Function","desc":"输入字符串","need":true},{"name":"data","type":"Hash","desc":"输入数据","need":true}],"mores":[{"title":"示例","texts":"Z.rstr('<a href=\"{href}\">{text}</a>', {href:\"#\", text:\"链接\"}) => <a href=\"#\">链接</a>Z.rstr(function(){/*<a href=\"{%0}\">{%1}</a>* /}, \"#\", \"链接\") => <a href=\"#\">链接</a>"}],"ret":{"desc":"结果","type":"String"}}]},"widget":{"name":"内置组件","items":[{"name":"scrollTop( )","isprototype":false,"syntaxs":[{"args":["top","time","type"],"desc":"获取或者设置滚动条的top值，设置是以动画滚动方式"}],"params":[{"name":"top","type":"Number","desc":"设置scrollTop的值","need":false},{"name":"time","type":"Number","desc":"默认800，执行动画所需时间，单位为ms","need":false},{"name":"type","type":"String","desc":"缓动类型，默认为circOut","need":false}],"ret":{"desc":"滚动条top值","type":"Integer"}},{"name":"anim( )","isprototype":true,"syntaxs":[{"args":["attrs","option"],"desc":"创建动画对象"}],"params":[{"name":"attrs","type":"Object","desc":"css属性和值","need":true},{"name":"option","type":"Object","desc":"动画配置对象","need":false}],"mores":[{"title":"attrs配置参数","texts":"取值left,top,right,bottom,margin,padding,opacity等，不支持color，当属性前面带x,则表示相对运动，比如xleft:-10,表示left左移10px"},{"title":"option配置参数","table":[["key","类型","说明"],["dur","Integer","动画执行的时间，单位ms，默认800ms"],["easing","string","动画公式，默认Both"],["onbefore","function","动画开始时执行的回调函数"],["onplay","function","动画执行中的回调函数"],["ondone","function","动画执行完的回调函数"],["onstop","function","动画被手动终止的回调函数"]]},{"title":"easing公式","table":[["值","描述"],["Linear","匀速"],["slowIn","缓慢渐入"],["slowOut","缓慢渐出"],["slowBoth","--"],["In","--"],["Out","--"],["Both","--"],["elasticIn","弹簧效果"],["elasticOut","--"],["elasticBoth","--"],["backIn","返回效果"],["backOut","--"],["backBoth","--"],["bounceIn","撞击效果"],["bounceOut","--"],["bounceBoth","--"]]}],"ret":{"desc":"动画对象","type":"Anim"}},{"name":"drag( )","isprototype":true,"syntaxs":[{"args":["option"],"desc":"创建拖放对象"}],"params":[{"name":"option","type":"Object","desc":"拖拽配置对象","need":true}],"mores":[{"title":"option配置参数","table":[["key","类型","说明"],["before","function","拖动前回调"],["running","function","拖动中回调"],["after","function","拖动完成后"],["limitNode","Node","限制范围的节点，参数为window则限定为浏览器可见屏幕内"],["lockx","1|0","锁定横向拖动"],["locky","1|0","锁定纵向拖动"],["hand","Node|NodeList","拖动的句柄容器"]]},{"title":"接口说明","table":[["值","描述"],["addHand","添加拖放句柄"],["rmvHand","移除拖放句柄，参数为节点"]]}],"ret":{"desc":"拖拽对象","type":"Drag"}},{"name":"easyAnim( )","isprototype":false,"syntaxs":[{"args":["cssAttr","callback"],"desc":"快速执行一个简单动画"}],"params":[{"name":"cssAttr","type":"Object","desc":"css属性值","need":true},{"name":"callback","type":"Function","desc":" 动画完成后的回调","need":true}]},{"name":"log( )","isprototype":false,"syntaxs":[{"args":["title","msg"],"desc":"输出信息到调试面板"}],"params":[{"name":"title","type":"String","desc":"标题","need":false},{"name":"msg","type":"Any","desc":"信息","need":true}]}]}}

renderAPI();

Z('#apibox').click(function(e){
    var target = Z(e.target);
    if(target.tag('LI')){
        target.cls('='
            + (/selected/.test(target.cls()) ? ''
            : /_s/.test(target.attr('key')) ? 'selected_s'
            : /_p/.test(target.attr('key')) ? 'selected_p'
            : '')
        )
    }
});

Z('.toolbar').click(function(e){
    
    var target = Z(e.target);
    
    if(target.tag('A')){
        
        var jbtn = target.attr('jbtn');
        
        if(jbtn == 'packcode'){
            
            Z('#jscode').html(
                Zwhl.output('js',  getcode($CODE, $API, getExportsAPI()) )
            ).show().child(0).attr('edit', 'off');
            
            showAlert('代码生成完毕！');
        
        }else if(jbtn == 'pickall'){
            
            Z('#apibox li').each(function(){
                if(this.attr('key').indexOf('_s') != -1){
                    this.cls('=selected_s');
                }else{
                    this.cls('=selected_p');
                }
            });
            
        }else if(jbtn == 'clean'){
            
            Z('#apibox li').each(function(){
                this.cls('=');
            });
            
        }else if(jbtn == 'createdoc'){
            
            if(target.html() == '查看文档'){
                
            }else{
                e.preventDefault();
                Z.post('/build/createdoc.jhtml', function(resp){
                    if(resp && resp.ok){
                        showAlert('文档生成完毕！');
                    }
                });
            }
            
        }
    }
    
});

function renderAPI(){
    
    var html = ['<a name=pickapi></a>'];

    forEach($API, '');
    
    Z('.pagebox').append('<div id=apibox>'+ html.join('') +'</div>', 0);
    
    function forEach(obj, pName){
        for(var key in obj){
            if(typeof obj[key] == 'object'){ //继续遍历
                for(var key in obj){
                    forEach(obj[key], pName ? pName + '.' + key : key);
                }
            }else{ //元素
                html.push('<fieldset><legend>'+ pName +'</legend><ul>');
                for(var key in obj){
                    var name = key;
                    name = key.substr(0, key.length - 2);
                    html.push('<li key="'+ key +'">'+ name +'<pre style="display:none">'+ obj[key] +'</pre></li>');
                }
                html.push('</ul></fieldset>');
            }
            break;
        }
    }
    
}


function showAlert(text){
    
    var box = Z.E('<div style="position:fixed;left:8px;top:88px;width:200px;padding:8px 0;text-align:center;background:#699acb;border:1px solid #666;color:#fff;font-size:24px">'+ text +'</div>');
    
    Z(document.body).append(box);
    setTimeout(function(){
        box.remove();
    }, 1000);
    
}

function getExportsAPI(){
    
    var exports = [];
    Z('#apibox li').each(function(){
        if(/selected/.test(this.cls())){
            exports.push(this.attr('key'));
        }
    });
    return exports;
    
}

function getcode(systemCode, systemAPI, exportsAPI){
    
    var API = function(){
		var apis = {};
		for(var key in systemAPI){
			for(var moduleName in systemAPI[key]){
				
				if(typeof systemAPI[key][moduleName] == 'object'){
					for(var apiName in systemAPI[key][moduleName]){
						apis[apiName] = systemAPI[key][moduleName][apiName];
					}
				}else{
					apis[moduleName] = systemAPI[key][moduleName];
				}
				
			}
		}
		return apis;
	}();
	
	
	if({}.toString.call(exportsAPI) == '[object Array]' && exportsAPI.length){
		
		var exports = {};
		exportsAPI.forEach(function(key){
            if(key in API){
                exports[key] = API[key]; 
            }else{
                $log('pack.mjs.exports => the '+key+' is not defined');
            }
        });
		exportsAPI = exports;
		
	}else{
		
		exportsAPI = API;
		
	}
	
	return getCodeByExports(systemCode, exportsAPI);
    
    function getCodeByExports(systemCode, exports){
        
        var tabChar = '    ';
        var exportsAPI = [];
        var exportsFns = [];
        var exportsVars = [];
        
        var imports = {defined:{}, undefined:{}};
        
        foreach(exports, function(code, key){
            
            key = key.split('_');
            code = formatCode(code);
            
            if(parseImports(code)){
            
                if(key[1] == 's'){
                    exportsAPI.push(tabChar +'$z.'+ key[0] +' = '+ code +';');                
                }else if(key[1] == 'p'){
                    exportsAPI.push(tabChar +'$p.'+ key[0] +' = '+ code +';');
                }
                
            }else{
                
                $log('pack.mjs.getCodeByExports => the '+key[0]+' is not exports');
                
            }
            
        });
        
        
        exportsAPI = exportsAPI.join('\n\n');
        if(/\$p\./.test(exportsAPI)){ //包含原型
            if(imports.defined.$z == null && imports.undefined.$z == null){ //未导入$z
            
                if(systemCode.$z){
                    parseImports(formatCode(systemCode.$z.source));
                }else{
                    $log('pack.mjs.getCodeByExports => the $z is not defined');
                }
                
            }
        }else{ //纯静态方法
            exportsAPI = exportsAPI + '\n\n' + tabChar + 'function $z(){}';
        }
        
        foreach(systemCode, function(code, key){
            
        
            if(imports.defined[key]){
                
                var code = tabChar + code.source.replace(/\n/g, '\n'+ tabChar) +'\n';
                if(/^\s*function\s*/.test(code)){ //是函数还是变量
                    exportsFns.push(code);
                }else{
                    exportsVars.push(code.replace(/;(\s*|\/\/.*)$/, '')); //去除尾部的分号和空白
                }
                
            }else if(imports.defined[key] == false){
                
                $log('pack.mjs.getCodeByExports => the '+key+' is not finish defined');
                
            }else{
                
                //$log('pack.mjs.getCodeByExports => the '+key+' is not be use');
                
            }

        });
        
        foreach(imports.undefined, function(p, key){
            
            $log('pack.mjs.getCodeByExports => the '+key+' is not defined');
            
        });
        
        if(exportsVars.length){
            exportsVars[0] = exportsVars[0].replace(/^\s*/, '');
            exportsVars = tabChar +'var\n'+ tabChar + exportsVars.join(',\n\n') +';\n';
        }else{
            exportsVars = '';
        }
        
        if(exportsFns.length){
            exportsFns = exportsFns.join('\n');
        }else{
            exportsFns = '';
        }
        
        return (
            'Z = function(){\n\n'
            + exportsVars + '\n'
            + exportsFns + '\n'
            + exportsAPI + '\n'
            +'\n'
            + tabChar + 'return $z;\n}();'
        ).replace(/\r\n|\n/g, '\r\n');
        
        
        function parseImports(code){
            //$log(code);
            var isok = true;
            code.replace(/\$\w+/g, function(name){
                
                if(imports.defined[name] == true){ //模块已经完整定义
                    
                }else if(imports.defined[name] == false){ //模版已经定义，但是依赖的模块未定义
                    
                    isok = false;
                    
                }else if(imports.undefined[name]){ //模块未定义
                    
                    isok = false;
                    
                }else{ //模块是否定义状态未知，开始设置模块定义状态
                    
                    if(!systemCode[name]){
                        
                        imports.undefined[name] = true;
                        isok = false;
                        
                    }else{
                        
                        imports.defined[name] = true;
                        imports.defined[name] = isok = parseImports(systemCode[name].source);
                        
                    }
                    
                }
                
            });
            //$log({code:code, isok:isok});
            
            return isok;
            
        }
        
        
        function foreach(data, callback){
            for(var key in data){
                callback(data[key], key);
            }
        }
        
        function toStr(fn){
            return typeof fn == 'function' ? String.toString.call(fn) : fn;
        }
        
        function formatCode(code){
            return toStr(code).replace(/\r/g, '').replace(/^/mg, tabChar).replace(/^\s*|\s*$/g, '');
        }
        
    }

    function $log(){}    
}
        
}();</script></div>

<script>
if(/rebuild=1/.test(location.search)){ //重新构建静态文件
    location.href = location.href.replace('?rebuild=1', '');
}
if(/z\.js/.test(location.hostname) && !/;/.test(location.href)){
    location.replace(';/');
}
</script>
